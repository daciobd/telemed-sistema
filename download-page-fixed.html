<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download TeleMed - Arquivos Funcionais</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
        }
        
        .download-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 600px;
            width: 90%;
        }
        
        .logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #10b981, #3b82f6);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 2rem;
            box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3);
        }
        
        .logo svg {
            width: 40px;
            height: 40px;
            color: white;
        }
        
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #1f2937, #374151);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            font-size: 1.1rem;
            color: #6b7280;
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        
        .file-list {
            background: #f8fafc;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            text-align: left;
        }
        
        .file-category {
            margin-bottom: 1rem;
        }
        
        .file-category h3 {
            font-size: 1rem;
            font-weight: 600;
            color: #10b981;
            margin-bottom: 0.5rem;
        }
        
        .file-category ul {
            list-style: none;
            margin-left: 1rem;
        }
        
        .file-category li {
            font-size: 0.9rem;
            color: #6b7280;
            margin-bottom: 0.25rem;
            position: relative;
        }
        
        .file-category li:before {
            content: "‚úì";
            color: #10b981;
            font-weight: bold;
            position: absolute;
            left: -1rem;
        }
        
        .download-btn {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3);
            margin-right: 1rem;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(16, 185, 129, 0.4);
        }
        
        .download-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .info-btn {
            background: transparent;
            color: #6b7280;
            padding: 1rem 2rem;
            border: 2px solid #d1d5db;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .info-btn:hover {
            border-color: #10b981;
            color: #10b981;
        }
        
        .progress {
            display: none;
            margin-top: 1rem;
        }
        
        .progress-bar {
            background: #e5e7eb;
            border-radius: 10px;
            height: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #10b981, #059669);
            height: 100%;
            width: 0%;
            transition: width 0.3s;
        }
        
        .status {
            margin-top: 1rem;
            font-size: 0.9rem;
            color: #6b7280;
        }
        
        @media (max-width: 768px) {
            .download-container {
                padding: 2rem 1.5rem;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .download-btn, .info-btn {
                width: 100%;
                margin-bottom: 1rem;
                margin-right: 0;
            }
        }
    </style>
</head>
<body>
    <div class="download-container">
        <div class="logo">
            <svg fill="currentColor" viewBox="0 0 20 20">
                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
        </div>
        
        <h1>Download TeleMed</h1>
        <p class="subtitle">
            Baixe todos os arquivos funcionais do projeto TeleMed em um ZIP organizado. 
            Inclui frontend React, backend Node.js, configura√ß√µes e documenta√ß√£o.
        </p>
        
        <div class="file-list">
            <div class="file-category">
                <h3>üîß Configura√ß√£o</h3>
                <ul>
                    <li>package.json, tsconfig.json, vite.config.ts</li>
                    <li>drizzle.config.ts, components.json</li>
                </ul>
            </div>
            
            <div class="file-category">
                <h3>üñ•Ô∏è Backend (Node.js + Express)</h3>
                <ul>
                    <li>server/index.ts - Servidor principal</li>
                    <li>server/auth.ts - Sistema autentica√ß√£o</li>
                    <li>server/routes/ - APIs e endpoints</li>
                    <li>server/security/ - Seguran√ßa LGPD</li>
                </ul>
            </div>
            
            <div class="file-category">
                <h3>üé® Frontend (React + TypeScript)</h3>
                <ul>
                    <li>client/src/App.tsx - App principal</li>
                    <li>client/src/pages/ - P√°ginas sistema</li>
                    <li>client/src/components/ - Componentes UI</li>
                    <li>client/src/hooks/ - Hooks customizados</li>
                </ul>
            </div>
            
            <div class="file-category">
                <h3>üöÄ Deploy e Build</h3>
                <ul>
                    <li>build.js, start.js - Scripts produ√ß√£o</li>
                    <li>landing-page-simple.html - Landing page</li>
                </ul>
            </div>
        </div>
        
        <div>
            <button id="download-btn" class="download-btn" onclick="downloadZipDirect()">
                üì¶ Baixar Backup Completo (v2.1.0)
            </button>
            <button id="download-simple" class="info-btn" onclick="downloadSimpleZip()">
                üìÑ Baixar Vers√£o Simples
            </button>
        </div>
        
        <div class="progress" id="progress">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="status" id="status">Preparando arquivos...</div>
        </div>
    </div>

    <script>
        // Fun√ß√£o para baixar ZIP completo via API
        async function downloadZipDirect() {
            const btn = document.getElementById('download-btn');
            const progress = document.getElementById('progress');
            const progressFill = document.getElementById('progress-fill');
            const status = document.getElementById('status');
            
            btn.disabled = true;
            btn.textContent = 'Baixando...';
            progress.style.display = 'block';
            status.textContent = 'Preparando download...';
            
            try {
                status.textContent = 'Iniciando download direto...';
                progressFill.style.width = '50%';
                
                // Download direto e simples
                status.textContent = 'Preparando TeleMed v2.1.0...';
                progressFill.style.width = '100%';
                
                // For√ßa download
                window.location.href = '/api/download-zip';
                status.textContent = '‚úÖ Download iniciado!';
                
                setTimeout(() => {
                    btn.disabled = false;
                    btn.textContent = 'üì¶ Baixar Backup Completo (v2.1.0)';
                    progress.style.display = 'none';
                }, 3000);
                
            } catch (error) {
                console.error('Erro no download:', error);
                status.textContent = 'Erro no download. Tentando m√©todo alternativo...';
                window.location.href = '/api/download-zip';
                btn.disabled = false;
                btn.textContent = 'üì¶ Baixar Backup Completo (v2.1.0)';
            }
        }
        
        // Fun√ß√£o alternativa para criar ZIP no cliente
        async function downloadSimpleZip() {
            const btn = document.getElementById('download-simple');
            const progress = document.getElementById('progress');
            const progressFill = document.getElementById('progress-fill');
            const status = document.getElementById('status');
            
            btn.disabled = true;
            btn.textContent = 'Gerando ZIP...';
            progress.style.display = 'block';
            
            try {
                const zip = new JSZip();
                
                // Arquivos b√°sicos do TeleMed
                const files = {
                    'README.md': generateReadme(),
                    'package.json': await fetchOrGenerate('/package.json', generatePackageJson()),
                    'landing-page-simple.html': await fetchOrGenerate('/landing-simple', generateLandingPage()),
                    'config.json': generateConfig(),
                    'telemed-info.txt': generateInfo()
                };
                
                let current = 0;
                const total = Object.keys(files).length;
                
                for (const [fileName, content] of Object.entries(files)) {
                    zip.file(fileName, content);
                    current++;
                    const percent = Math.round((current / total) * 100);
                    progressFill.style.width = percent + '%';
                    status.textContent = `Adicionando ${fileName}... (${current}/${total})`;
                    await new Promise(resolve => setTimeout(resolve, 200));
                }
                
                status.textContent = 'Gerando arquivo ZIP...';
                progressFill.style.width = '90%';
                
                const content = await zip.generateAsync({ type: "blob" });
                
                progressFill.style.width = '100%';
                status.textContent = 'Download iniciado!';
                
                // Download
                const link = document.createElement("a");
                link.href = URL.createObjectURL(content);
                link.download = "telemed-sistema-basico.zip";
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                setTimeout(() => {
                    btn.disabled = false;
                    btn.textContent = 'üìÑ Baixar Vers√£o Simples';
                    progress.style.display = 'none';
                    progressFill.style.width = '0%';
                }, 2000);
                
            } catch (error) {
                console.error('Erro ao criar ZIP:', error);
                status.textContent = 'Erro ao gerar ZIP. Tente novamente.';
                btn.disabled = false;
                btn.textContent = 'üìÑ Baixar Vers√£o Simples';
            }
        }
        
        async function fetchOrGenerate(path, fallback) {
            try {
                const response = await fetch(path);
                if (response.ok) {
                    return await response.text();
                }
                return fallback;
            } catch (error) {
                return fallback;
            }
        }
        
        function generateReadme() {
            return `# TeleMed Sistema - Telemedicina Completa

## Vis√£o Geral
Sistema completo de telemedicina com React + Node.js, incluindo:
- Frontend React com TypeScript
- Backend Express com PostgreSQL  
- Sistema de autentica√ß√£o JWT
- Integra√ß√£o OpenAI para IA m√©dica
- Design responsivo premium
- LGPD compliance

## Funcionalidades
- Consultas m√©dicas online
- Sistema de leil√£o para consultas
- Prescri√ß√µes digitais (MEMED)
- IA m√©dica para triagem
- Dashboard m√©dico e paciente
- Notifica√ß√µes SMS/WhatsApp
- Agenda m√©dica avan√ßada

## Como executar:
1. npm install
2. Configure .env com suas credenciais
3. npm run dev

## URLs:
- Desenvolvimento: Replit
- Produ√ß√£o: telemed-sistema.onrender.com
- Landing: /landing-simple
- Download: /download

Desenvolvido com ‚ù§Ô∏è para revolucionar a telemedicina no Brasil.`;
        }
        
        function generatePackageJson() {
            return JSON.stringify({
                "name": "telemed-sistema",
                "version": "2.0.0",
                "description": "Sistema completo de telemedicina",
                "main": "server/index.ts",
                "scripts": {
                    "dev": "tsx server/index.ts",
                    "build": "node build.js",
                    "start": "node start.js"
                },
                "dependencies": {
                    "react": "^18.2.0",
                    "express": "^4.21.2",
                    "typescript": "^5.9.2"
                }
            }, null, 2);
        }
        
        function generateLandingPage() {
            return `<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeleMed - Consultas Online</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: linear-gradient(135deg, #f0f9ff, #e0e7ff); color: #333; }
        .hero { text-align: center; padding: 4rem 2rem; }
        .hero h1 { font-size: 3rem; font-weight: 700; margin-bottom: 1rem; }
        .hero p { font-size: 1.2rem; color: #6b7280; margin-bottom: 2rem; }
        .cta-button { background: #10b981; color: white; padding: 1rem 2rem; border: none; border-radius: 8px; font-size: 1.1rem; cursor: pointer; }
    </style>
</head>
<body>
    <section class="hero">
        <h1>TeleMed - Sua Sa√∫de na Palma da M√£o</h1>
        <p>Consultas m√©dicas online, seguras e acess√≠veis.</p>
        <button class="cta-button" onclick="window.location.href='https://telemed-sistema.onrender.com'">Comece Agora</button>
    </section>
</body>
</html>`;
        }
        
        function generateConfig() {
            return JSON.stringify({
                name: "TeleMed Sistema",
                version: "2.0.0",
                description: "Plataforma completa de telemedicina",
                technologies: ["React", "TypeScript", "Node.js", "Express", "PostgreSQL", "OpenAI"],
                features: ["Consultas online", "IA m√©dica", "Prescri√ß√µes digitais", "Dashboard m√©dico"],
                urls: {
                    development: "Replit",
                    production: "telemed-sistema.onrender.com"
                }
            }, null, 2);
        }
        
        function generateInfo() {
            return `TeleMed Sistema - Informa√ß√µes T√©cnicas

Data de cria√ß√£o: ${new Date().toLocaleDateString('pt-BR')}
Plataforma: Replit + Render
Stack: React + Node.js + PostgreSQL

Funcionalidades principais:
- Sistema completo de telemedicina
- Interface premium responsiva
- Backend robusto com seguran√ßa LGPD
- Integra√ß√£o OpenAI para IA m√©dica
- Sistema de leil√£o para consultas
- Prescri√ß√µes digitais
- Notifica√ß√µes m√©dicas

URLs importantes:
- App principal: /
- Landing page: /landing-simple  
- Download: /download
- API: /api/*

Para suporte: contato@telemed.com.br`;
        }
    </script>
</body>
</html>