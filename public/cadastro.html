<!doctype html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            Cadastro - TeleMed | Junte-se à Revolução da Saúde Digital
        </title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet"
        />
        <style>
            .gradient-bg {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            }

            .glass-effect {
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }

            .signup-card {
                animation: slideInUp 0.6s ease-out;
            }

            @keyframes slideInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .floating-element {
                animation: float 6s ease-in-out infinite;
            }

            @keyframes float {
                0%,
                100% {
                    transform: translateY(0px);
                }
                50% {
                    transform: translateY(-20px);
                }
            }

            .input-group {
                position: relative;
            }

            .input-group input:focus + label,
            .input-group input:not(:placeholder-shown) + label,
            .input-group select:focus + label,
            .input-group select:not([value=""]) + label {
                transform: translateY(-25px) scale(0.9);
                color: #3b82f6;
            }

            .input-group label {
                position: absolute;
                left: 12px;
                top: 12px;
                transition: all 0.2s ease;
                pointer-events: none;
                color: #6b7280;
            }

            .step-indicator {
                transition: all 0.3s ease;
            }

            .step-active {
                background: linear-gradient(135deg, #3b82f6, #60a5fa);
                color: white;
            }

            .step-completed {
                background: linear-gradient(135deg, #10b981, #34d399);
                color: white;
            }

            .step-pending {
                background: #f3f4f6;
                color: #6b7280;
            }

            .loading-spinner {
                border: 3px solid #f3f3f3;
                border-top: 3px solid #3b82f6;
                border-radius: 50%;
                width: 20px;
                height: 20px;
                animation: spin 1s linear infinite;
            }

            @keyframes spin {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }

            .file-upload {
                transition: all 0.3s ease;
            }

            .file-upload:hover {
                border-color: #3b82f6;
                background-color: rgba(59, 130, 246, 0.05);
            }

            .success-checkmark {
                animation: checkmark 0.6s ease-in-out;
            }

            @keyframes checkmark {
                0% {
                    transform: scale(0);
                }
                50% {
                    transform: scale(1.2);
                }
                100% {
                    transform: scale(1);
                }
            }
        </style>
    </head>
    <body class="gradient-bg min-h-screen">
        <!-- Background Elements -->
        <div class="absolute inset-0 overflow-hidden">
            <div
                class="floating-element absolute top-20 left-10 w-20 h-20 bg-white bg-opacity-10 rounded-full"
            ></div>
            <div
                class="floating-element absolute top-40 right-20 w-16 h-16 bg-white bg-opacity-10 rounded-full"
                style="animation-delay: -2s"
            ></div>
            <div
                class="floating-element absolute bottom-20 left-20 w-12 h-12 bg-white bg-opacity-10 rounded-full"
                style="animation-delay: -4s"
            ></div>
            <div
                class="floating-element absolute bottom-40 right-10 w-24 h-24 bg-white bg-opacity-10 rounded-full"
                style="animation-delay: -1s"
            ></div>
        </div>

        <!-- Header -->
        <nav
            class="relative z-10 bg-white bg-opacity-10 backdrop-blur-md border-b border-white border-opacity-20"
        >
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center">
                        <button
                            onclick="goBack()"
                            class="mr-4 p-2 rounded-lg hover:bg-white hover:bg-opacity-20 transition-colors text-white"
                        >
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <div class="flex items-center text-white">
                            <i class="fas fa-heartbeat text-xl mr-3"></i>
                            <h1 class="text-xl font-semibold">TeleMed</h1>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <a
                            href="login.html"
                            class="text-white hover:text-blue-200 transition-colors"
                        >
                            <i class="fas fa-sign-in-alt mr-1"></i>Fazer Login
                        </a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Progress Indicator -->
        <div
            class="relative z-10 bg-white bg-opacity-10 backdrop-blur-md border-b border-white border-opacity-20"
        >
            <div class="max-w-4xl mx-auto px-4 py-4">
                <div class="flex items-center justify-between">
                    <div
                        id="step1"
                        class="step-indicator step-active flex items-center px-4 py-2 rounded-lg"
                    >
                        <i class="fas fa-user-plus mr-2"></i>
                        <span class="hidden sm:inline">Dados Básicos</span>
                    </div>
                    <div
                        class="flex-1 h-1 bg-white bg-opacity-20 mx-4 rounded"
                    ></div>
                    <div
                        id="step2"
                        class="step-indicator step-pending flex items-center px-4 py-2 rounded-lg"
                    >
                        <i class="fas fa-id-card mr-2"></i>
                        <span class="hidden sm:inline">Informações</span>
                    </div>
                    <div
                        class="flex-1 h-1 bg-white bg-opacity-20 mx-4 rounded"
                    ></div>
                    <div
                        id="step3"
                        class="step-indicator step-pending flex items-center px-4 py-2 rounded-lg"
                    >
                        <i class="fas fa-shield-alt mr-2"></i>
                        <span class="hidden sm:inline">Segurança</span>
                    </div>
                    <div
                        class="flex-1 h-1 bg-white bg-opacity-20 mx-4 rounded"
                    ></div>
                    <div
                        id="step4"
                        class="step-indicator step-pending flex items-center px-4 py-2 rounded-lg"
                    >
                        <i class="fas fa-check-circle mr-2"></i>
                        <span class="hidden sm:inline">Finalizar</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div
            class="relative z-10 flex items-center justify-center min-h-screen p-4 pt-20"
        >
            <div class="w-full max-w-4xl mx-auto">
                <!-- Step 1: Tipo de Usuário e Dados Básicos -->
                <div id="stepContent1" class="signup-card">
                    <div class="glass-effect rounded-2xl p-8 max-w-2xl mx-auto">
                        <div class="text-center mb-8">
                            <h2 class="text-3xl font-bold text-white mb-2">
                                Criar Conta
                            </h2>
                            <p class="text-blue-200">
                                Junte-se a milhares de usuários que confiam na
                                TeleMed
                            </p>
                        </div>

                        <!-- User Type Selection -->
                        <div class="mb-8">
                            <h3 class="text-white text-lg font-semibold mb-4">
                                Você é:
                            </h3>
                            <div class="grid grid-cols-2 gap-4">
                                <div
                                    class="user-type-card bg-white bg-opacity-10 border border-white border-opacity-30 rounded-xl p-6 cursor-pointer transition-all hover:bg-opacity-20"
                                    onclick="selectUserType('patient')"
                                >
                                    <div class="text-center">
                                        <i
                                            class="fas fa-user text-4xl text-blue-300 mb-3"
                                        ></i>
                                        <h4
                                            class="text-white font-semibold mb-2"
                                        >
                                            Paciente
                                        </h4>
                                        <p class="text-blue-200 text-sm">
                                            Busco consultas médicas online
                                        </p>
                                    </div>
                                </div>
                                <div
                                    class="user-type-card bg-white bg-opacity-10 border border-white border-opacity-30 rounded-xl p-6 cursor-pointer transition-all hover:bg-opacity-20"
                                    onclick="selectUserType('doctor')"
                                >
                                    <div class="text-center">
                                        <i
                                            class="fas fa-user-md text-4xl text-green-300 mb-3"
                                        ></i>
                                        <h4
                                            class="text-white font-semibold mb-2"
                                        >
                                            Médico
                                        </h4>
                                        <p class="text-blue-200 text-sm">
                                            Quero atender pacientes online
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Basic Info Form -->
                        <form id="step1Form" class="space-y-6">
                            <div class="grid md:grid-cols-2 gap-4">
                                <div class="input-group">
                                    <input
                                        type="text"
                                        id="firstName"
                                        required
                                        class="w-full px-4 py-3 bg-white bg-opacity-10 border border-white border-opacity-30 rounded-lg text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-400"
                                        placeholder="Nome"
                                    />
                                    <label for="firstName" class="text-white"
                                        >Nome</label
                                    >
                                </div>
                                <div class="input-group">
                                    <input
                                        type="text"
                                        id="lastName"
                                        required
                                        class="w-full px-4 py-3 bg-white bg-opacity-10 border border-white border-opacity-30 rounded-lg text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-400"
                                        placeholder="Sobrenome"
                                    />
                                    <label for="lastName" class="text-white"
                                        >Sobrenome</label
                                    >
                                </div>
                            </div>

                            <div class="input-group">
                                <input
                                    type="email"
                                    id="email"
                                    required
                                    class="w-full px-4 py-3 bg-white bg-opacity-10 border border-white border-opacity-30 rounded-lg text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-400"
                                    placeholder="Email"
                                />
                                <label for="email" class="text-white"
                                    >Email</label
                                >
                            </div>

                            <div class="grid md:grid-cols-2 gap-4">
                                <div class="input-group">
                                    <input
                                        type="tel"
                                        id="phone"
                                        required
                                        class="w-full px-4 py-3 bg-white bg-opacity-10 border border-white border-opacity-30 rounded-lg text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-400"
                                        placeholder="Telefone"
                                    />
                                    <label for="phone" class="text-white"
                                        >Telefone</label
                                    >
                                </div>
                                <div class="input-group">
                                    <input
                                        type="date"
                                        id="birthDate"
                                        required
                                        class="w-full px-4 py-3 bg-white bg-opacity-10 border border-white border-opacity-30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400"
                                    />
                                    <label for="birthDate" class="text-white"
                                        >Data de Nascimento</label
                                    >
                                </div>
                            </div>

                            <button
                                type="submit"
                                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors"
                            >
                                Continuar
                                <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Step 2: Informações Específicas -->
                <div id="stepContent2" class="signup-card hidden">
                    <div class="glass-effect rounded-2xl p-8 max-w-2xl mx-auto">
                        <div class="text-center mb-8">
                            <h2 class="text-3xl font-bold text-white mb-2">
                                Informações Específicas
                            </h2>
                            <p class="text-blue-200" id="step2Subtitle">
                                Complete seu perfil
                            </p>
                        </div>

                        <form id="step2Form" class="space-y-6">
                            <!-- Patient Specific Fields -->
                            <div id="patientFields" class="space-y-6">
                                <div class="input-group">
                                    <input
                                        type="text"
                                        id="cpf"
                                        class="w-full px-4 py-3 bg-white bg-opacity-10 border border-white border-opacity-30 rounded-lg text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-400"
                                        placeholder="CPF"
                                    />
                                    <label for="cpf" class="text-white"
                                        >CPF</label
                                    >
                                </div>

                                <div class="input-group">
                                    <select
                                        id="gender"
                                        class="w-full px-4 py-3 bg-white bg-opacity-10 border border-white border-opacity-30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400"
                                    >
                                        <option value="">Selecione</option>
                                        <option value="masculino">
                                            Masculino
                                        </option>
                                        <option value="feminino">
                                            Feminino
                                        </option>
                                        <option value="outro">Outro</option>
                                        <option value="nao_informar">
                                            Prefiro não informar
                                        </option>
                                    </select>
                                    <label for="gender" class="text-white"
                                        >Sexo</label
                                    >
                                </div>

                                <div class="input-group">
                                    <input
                                        type="text"
                                        id="address"
                                        class="w-full px-4 py-3 bg-white bg-opacity-10 border border-white border-opacity-30 rounded-lg text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-400"
                                        placeholder="Endereço completo"
                                    />
                                    <label for="address" class="text-white"
                                        >Endereço</label
                                    >
                                </div>

                                <div class="input-group">
                                    <input
                                        type="text"
                                        id="emergencyContact"
                                        class="w-full px-4 py-3 bg-white bg-opacity-10 border border-white border-opacity-30 rounded-lg text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-400"
                                        placeholder="Contato de emergência"
                                    />
                                    <label
                                        for="emergencyContact"
                                        class="text-white"
                                        >Contato de Emergência</label
                                    >
                                </div>
                            </div>

                            <!-- Doctor Specific Fields -->
                            <div id="doctorFields" class="space-y-6 hidden">
                                <div class="input-group">
                                    <input
                                        type="text"
                                        id="crm"
                                        required
                                        class="w-full px-4 py-3 bg-white bg-opacity-10 border border-white border-opacity-30 rounded-lg text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-400"
                                        placeholder="CRM"
                                    />
                                    <label for="crm" class="text-white"
                                        >CRM</label
                                    >
                                </div>

                                <div class="input-group">
                                    <select
                                        id="specialty"
                                        required
                                        class="w-full px-4 py-3 bg-white bg-opacity-10 border border-white border-opacity-30 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-400"
                                    >
                                        <option value="">
                                            Selecione sua especialidade
                                        </option>
                                        <option value="cardiologia">
                                            Cardiologia
                                        </option>
                                        <option value="dermatologia">
                                            Dermatologia
                                        </option>
                                        <option value="endocrinologia">
                                            Endocrinologia
                                        </option>
                                        <option value="gastroenterologia">
                                            Gastroenterologia
                                        </option>
                                        <option value="ginecologia">
                                            Ginecologia
                                        </option>
                                        <option value="neurologia">
                                            Neurologia
                                        </option>
                                        <option value="oftalmologia">
                                            Oftalmologia
                                        </option>
                                        <option value="ortopedia">
                                            Ortopedia
                                        </option>
                                        <option value="pediatria">
                                            Pediatria
                                        </option>
                                        <option value="psiquiatria">
                                            Psiquiatria
                                        </option>
                                        <option value="urologia">
                                            Urologia
                                        </option>
                                        <option value="clinica_geral">
                                            Clínica Geral
                                        </option>
                                    </select>
                                    <label for="specialty" class="text-white"
                                        >Especialidade</label
                                    >
                                </div>

                                <div class="input-group">
                                    <input
                                        type="number"
                                        id="experience"
                                        min="0"
                                        max="50"
                                        class="w-full px-4 py-3 bg-white bg-opacity-10 border border-white border-opacity-30 rounded-lg text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-400"
                                        placeholder="Anos de experiência"
                                    />
                                    <label for="experience" class="text-white"
                                        >Anos de Experiência</label
                                    >
                                </div>

                                <div class="input-group">
                                    <input
                                        type="text"
                                        id="institution"
                                        class="w-full px-4 py-3 bg-white bg-opacity-10 border border-white border-opacity-30 rounded-lg text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-400"
                                        placeholder="Instituição de formação"
                                    />
                                    <label for="institution" class="text-white"
                                        >Instituição de Formação</label
                                    >
                                </div>
                            </div>

                            <div class="flex gap-4">
                                <button
                                    type="button"
                                    onclick="previousStep()"
                                    class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 rounded-lg transition-colors"
                                >
                                    <i class="fas fa-arrow-left mr-2"></i>Voltar
                                </button>
                                <button
                                    type="submit"
                                    class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors"
                                >
                                    Continuar
                                    <i class="fas fa-arrow-right ml-2"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Step 3: Segurança -->
                <div id="stepContent3" class="signup-card hidden">
                    <div class="glass-effect rounded-2xl p-8 max-w-2xl mx-auto">
                        <div class="text-center mb-8">
                            <h2 class="text-3xl font-bold text-white mb-2">
                                Segurança da Conta
                            </h2>
                            <p class="text-blue-200">
                                Crie uma senha segura para proteger sua conta
                            </p>
                        </div>

                        <form id="step3Form" class="space-y-6">
                            <div class="input-group">
                                <input
                                    type="password"
                                    id="password"
                                    required
                                    class="w-full px-4 py-3 pr-12 bg-white bg-opacity-10 border border-white border-opacity-30 rounded-lg text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-400"
                                    placeholder="Senha"
                                />
                                <label for="password" class="text-white"
                                    >Senha</label
                                >
                                <button
                                    type="button"
                                    onclick="togglePassword('password')"
                                    class="absolute right-3 top-3 text-white hover:text-blue-300"
                                >
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>

                            <div class="input-group">
                                <input
                                    type="password"
                                    id="confirmPassword"
                                    required
                                    class="w-full px-4 py-3 pr-12 bg-white bg-opacity-10 border border-white border-opacity-30 rounded-lg text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-400"
                                    placeholder="Confirmar senha"
                                />
                                <label for="confirmPassword" class="text-white"
                                    >Confirmar Senha</label
                                >
                                <button
                                    type="button"
                                    onclick="togglePassword('confirmPassword')"
                                    class="absolute right-3 top-3 text-white hover:text-blue-300"
                                >
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>

                            <!-- Password Strength Indicator -->
                            <div class="space-y-2">
                                <div class="text-white text-sm">
                                    Força da senha:
                                </div>
                                <div
                                    class="w-full bg-white bg-opacity-20 rounded-full h-2"
                                >
                                    <div
                                        id="passwordStrength"
                                        class="h-2 rounded-full transition-all duration-300"
                                        style="width: 0%"
                                    ></div>
                                </div>
                                <div
                                    id="passwordCriteria"
                                    class="text-xs text-blue-200 space-y-1"
                                >
                                    <div>• Mínimo 8 caracteres</div>
                                    <div>• Pelo menos uma letra maiúscula</div>
                                    <div>• Pelo menos um número</div>
                                    <div>
                                        • Pelo menos um caractere especial
                                    </div>
                                </div>
                            </div>

                            <div class="flex gap-4">
                                <button
                                    type="button"
                                    onclick="previousStep()"
                                    class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 rounded-lg transition-colors"
                                >
                                    <i class="fas fa-arrow-left mr-2"></i>Voltar
                                </button>
                                <button
                                    type="submit"
                                    class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors"
                                >
                                    Continuar
                                    <i class="fas fa-arrow-right ml-2"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Step 4: Documentos e Finalização -->
                <div id="stepContent4" class="signup-card hidden">
                    <div class="glass-effect rounded-2xl p-8 max-w-2xl mx-auto">
                        <div class="text-center mb-8">
                            <h2 class="text-3xl font-bold text-white mb-2">
                                Documentos e Termos
                            </h2>
                            <p class="text-blue-200">Finalize seu cadastro</p>
                        </div>

                        <form id="step4Form" class="space-y-6">
                            <!-- Document Upload for Doctors -->
                            <div id="doctorDocuments" class="space-y-4 hidden">
                                <h3 class="text-white font-semibold mb-4">
                                    Documentos Obrigatórios:
                                </h3>

                                <div
                                    class="file-upload border-2 border-dashed border-white border-opacity-30 rounded-lg p-6 text-center"
                                >
                                    <i
                                        class="fas fa-upload text-3xl text-blue-300 mb-3"
                                    ></i>
                                    <p class="text-white mb-2">
                                        CRM - Conselho Regional de Medicina
                                    </p>
                                    <input
                                        type="file"
                                        id="crmFile"
                                        accept=".pdf,.jpg,.png"
                                        class="hidden"
                                    />
                                    <button
                                        type="button"
                                        onclick="document.getElementById('crmFile').click()"
                                        class="text-blue-300 hover:text-white"
                                    >
                                        Clique para enviar
                                    </button>
                                </div>

                                <div
                                    class="file-upload border-2 border-dashed border-white border-opacity-30 rounded-lg p-6 text-center"
                                >
                                    <i
                                        class="fas fa-upload text-3xl text-blue-300 mb-3"
                                    ></i>
                                    <p class="text-white mb-2">
                                        Diploma de Medicina
                                    </p>
                                    <input
                                        type="file"
                                        id="diplomaFile"
                                        accept=".pdf,.jpg,.png"
                                        class="hidden"
                                    />
                                    <button
                                        type="button"
                                        onclick="document.getElementById('diplomaFile').click()"
                                        class="text-blue-300 hover:text-white"
                                    >
                                        Clique para enviar
                                    </button>
                                </div>
                            </div>

                            <!-- Terms and Conditions -->
                            <div class="space-y-4">
                                <label class="flex items-start text-white">
                                    <input
                                        type="checkbox"
                                        id="terms"
                                        required
                                        class="mt-1 mr-3"
                                    />
                                    <span class="text-sm">
                                        Aceito os
                                        <a
                                            href="#"
                                            class="text-blue-300 hover:text-white"
                                            >Termos de Uso</a
                                        >
                                        e
                                        <a
                                            href="#"
                                            class="text-blue-300 hover:text-white"
                                            >Política de Privacidade</a
                                        >
                                        da TeleMed
                                    </span>
                                </label>

                                <label
                                    class="flex items-start text-white"
                                    id="doctorTerms"
                                >
                                    <input
                                        type="checkbox"
                                        id="medicalTerms"
                                        class="mt-1 mr-3"
                                    />
                                    <span class="text-sm">
                                        Declaro que sou médico registrado no CRM
                                        e aceito as
                                        <a
                                            href="#"
                                            class="text-blue-300 hover:text-white"
                                            >Diretrizes Médicas</a
                                        >
                                        da plataforma
                                    </span>
                                </label>

                                <label class="flex items-start text-white">
                                    <input
                                        type="checkbox"
                                        id="newsletter"
                                        class="mt-1 mr-3"
                                    />
                                    <span class="text-sm">
                                        Quero receber novidades e promoções por
                                        email
                                    </span>
                                </label>
                            </div>

                            <div class="flex gap-4">
                                <button
                                    type="button"
                                    onclick="previousStep()"
                                    class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 rounded-lg transition-colors"
                                >
                                    <i class="fas fa-arrow-left mr-2"></i>Voltar
                                </button>
                                <button
                                    type="submit"
                                    id="finalSubmit"
                                    class="flex-1 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg transition-colors"
                                >
                                    <span id="submitText">Criar Conta</span>
                                    <div
                                        id="submitSpinner"
                                        class="loading-spinner ml-2 hidden"
                                    ></div>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Success Step -->
                <div id="successStep" class="signup-card hidden">
                    <div
                        class="glass-effect rounded-2xl p-8 max-w-2xl mx-auto text-center"
                    >
                        <div
                            class="success-checkmark w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6"
                        >
                            <i class="fas fa-check text-white text-3xl"></i>
                        </div>
                        <h2 class="text-3xl font-bold text-white mb-4">
                            Conta Criada com Sucesso!
                        </h2>
                        <p class="text-blue-200 mb-8" id="successMessage">
                            Bem-vindo à TeleMed! Sua conta foi criada e você já
                            pode fazer login.
                        </p>
                        <div class="space-y-4">
                            <button
                                onclick="goToLogin()"
                                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors"
                            >
                                <i class="fas fa-sign-in-alt mr-2"></i>Fazer
                                Login
                            </button>
                            <button
                                onclick="goHome()"
                                class="w-full border border-white border-opacity-30 text-white font-semibold py-3 rounded-lg hover:bg-white hover:bg-opacity-10 transition-colors"
                            >
                                <i class="fas fa-home mr-2"></i>Página Inicial
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div id="toast" class="fixed top-4 right-4 z-50 hidden">
            <!-- Toast notifications will be inserted here -->
        </div>

        <script>
            let currentStep = 1;
            let userType = "patient";
            let formData = {};

            // Initialize
            document.addEventListener("DOMContentLoaded", function () {
                setupFormValidation();
                setupPasswordStrength();

                // Auto-fill for demo
                if (window.location.search.includes("demo=1")) {
                    setTimeout(() => {
                        document.getElementById("firstName").value = "João";
                        document.getElementById("lastName").value = "Silva";
                        document.getElementById("email").value =
                            "joao.silva@email.com";
                        document.getElementById("phone").value =
                            "(11) 99999-9999";
                    }, 1000);
                }
            });

            function selectUserType(type) {
                userType = type;

                // Update visual selection
                document.querySelectorAll(".user-type-card").forEach((card) => {
                    card.classList.remove(
                        "ring-2",
                        "ring-blue-400",
                        "bg-opacity-20",
                    );
                });

                event.currentTarget.classList.add(
                    "ring-2",
                    "ring-blue-400",
                    "bg-opacity-20",
                );

                showToast(
                    `Tipo selecionado: ${type === "patient" ? "Paciente" : "Médico"}`,
                    "info",
                );
            }

            function updateStep(step) {
                // Hide all steps
                for (let i = 1; i <= 4; i++) {
                    document
                        .getElementById(`stepContent${i}`)
                        .classList.add("hidden");
                    const stepIndicator = document.getElementById(`step${i}`);

                    if (i < step) {
                        stepIndicator.className =
                            "step-indicator step-completed flex items-center px-4 py-2 rounded-lg";
                    } else if (i === step) {
                        stepIndicator.className =
                            "step-indicator step-active flex items-center px-4 py-2 rounded-lg";
                    } else {
                        stepIndicator.className =
                            "step-indicator step-pending flex items-center px-4 py-2 rounded-lg";
                    }
                }

                // Show current step
                document
                    .getElementById(`stepContent${step}`)
                    .classList.remove("hidden");
                currentStep = step;

                // Update step-specific content
                if (step === 2) {
                    updateStep2Content();
                } else if (step === 4) {
                    updateStep4Content();
                }
            }

            function updateStep2Content() {
                const isDoctor = userType === "doctor";
                document
                    .getElementById("patientFields")
                    .classList.toggle("hidden", isDoctor);
                document
                    .getElementById("doctorFields")
                    .classList.toggle("hidden", !isDoctor);

                document.getElementById("step2Subtitle").textContent = isDoctor
                    ? "Informações profissionais médicas"
                    : "Informações pessoais do paciente";
            }

            function updateStep4Content() {
                const isDoctor = userType === "doctor";
                document
                    .getElementById("doctorDocuments")
                    .classList.toggle("hidden", !isDoctor);
                document
                    .getElementById("doctorTerms")
                    .classList.toggle("hidden", !isDoctor);

                if (isDoctor) {
                    document.getElementById("medicalTerms").required = true;
                }
            }

            function nextStep() {
                if (currentStep < 4) {
                    updateStep(currentStep + 1);
                }
            }

            function previousStep() {
                if (currentStep > 1) {
                    updateStep(currentStep - 1);
                }
            }

            // Form validation and submission
            document
                .getElementById("step1Form")
                .addEventListener("submit", function (e) {
                    e.preventDefault();

                    if (!userType) {
                        showToast(
                            "Por favor, selecione se você é paciente ou médico.",
                            "error",
                        );
                        return;
                    }

                    if (validateStep1()) {
                        saveStepData(1);
                        nextStep();
                        showToast("Dados básicos salvos!", "success");
                    }
                });

            document
                .getElementById("step2Form")
                .addEventListener("submit", function (e) {
                    e.preventDefault();

                    if (validateStep2()) {
                        saveStepData(2);
                        nextStep();
                        showToast("Informações específicas salvas!", "success");
                    }
                });

            document
                .getElementById("step3Form")
                .addEventListener("submit", function (e) {
                    e.preventDefault();

                    if (validateStep3()) {
                        saveStepData(3);
                        nextStep();
                        showToast(
                            "Dados de segurança configurados!",
                            "success",
                        );
                    }
                });

            document
                .getElementById("step4Form")
                .addEventListener("submit", function (e) {
                    e.preventDefault();

                    if (validateStep4()) {
                        saveStepData(4);
                        submitRegistration();
                    }
                });

            function validateStep1() {
                const requiredFields = [
                    "firstName",
                    "lastName",
                    "email",
                    "phone",
                    "birthDate",
                ];
                let isValid = true;

                requiredFields.forEach((fieldId) => {
                    const field = document.getElementById(fieldId);
                    if (!field.value.trim()) {
                        field.classList.add("border-red-500");
                        isValid = false;
                    } else {
                        field.classList.remove("border-red-500");
                    }
                });

                // Email validation
                const email = document.getElementById("email").value;
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    document
                        .getElementById("email")
                        .classList.add("border-red-500");
                    showToast("Email inválido.", "error");
                    isValid = false;
                }

                // Age validation (must be 18+)
                const birthDate = new Date(
                    document.getElementById("birthDate").value,
                );
                const today = new Date();
                const age = today.getFullYear() - birthDate.getFullYear();
                if (age < 18) {
                    document
                        .getElementById("birthDate")
                        .classList.add("border-red-500");
                    showToast("Você deve ter pelo menos 18 anos.", "error");
                    isValid = false;
                }

                return isValid;
            }

            function validateStep2() {
                if (userType === "doctor") {
                    const crm = document.getElementById("crm").value;
                    const specialty =
                        document.getElementById("specialty").value;

                    if (!crm || !specialty) {
                        showToast(
                            "CRM e especialidade são obrigatórios para médicos.",
                            "error",
                        );
                        return false;
                    }

                    // CRM format validation
                    const crmRegex = /^CRM-?[A-Z]{2}-?\d{4,6}$/i;
                    if (!crmRegex.test(crm)) {
                        document
                            .getElementById("crm")
                            .classList.add("border-red-500");
                        showToast(
                            "Formato de CRM inválido. Use: CRM-SP-123456",
                            "error",
                        );
                        return false;
                    }
                } else {
                    const cpf = document.getElementById("cpf").value;
                    if (cpf && !validateCPF(cpf)) {
                        document
                            .getElementById("cpf")
                            .classList.add("border-red-500");
                        showToast("CPF inválido.", "error");
                        return false;
                    }
                }

                return true;
            }

            function validateStep3() {
                const password = document.getElementById("password").value;
                const confirmPassword =
                    document.getElementById("confirmPassword").value;

                if (password !== confirmPassword) {
                    document
                        .getElementById("confirmPassword")
                        .classList.add("border-red-500");
                    showToast("As senhas não coincidem.", "error");
                    return false;
                }

                if (!isPasswordStrong(password)) {
                    showToast(
                        "A senha não atende aos critérios de segurança.",
                        "error",
                    );
                    return false;
                }

                return true;
            }

            function validateStep4() {
                if (!document.getElementById("terms").checked) {
                    showToast("Você deve aceitar os termos de uso.", "error");
                    return false;
                }

                if (
                    userType === "doctor" &&
                    !document.getElementById("medicalTerms").checked
                ) {
                    showToast(
                        "Médicos devem aceitar as diretrizes médicas.",
                        "error",
                    );
                    return false;
                }

                return true;
            }

            function saveStepData(step) {
                const stepData = {};
                const currentForm = document.getElementById(`step${step}Form`);
                const inputs = currentForm.querySelectorAll("input, select");

                inputs.forEach((input) => {
                    if (input.type !== "checkbox" && input.type !== "file") {
                        stepData[input.id] = input.value;
                    } else if (input.type === "checkbox") {
                        stepData[input.id] = input.checked;
                    }
                });

                stepData.userType = userType;
                formData[`step${step}`] = stepData;
            }

            async function submitRegistration() {
                const submitBtn = document.getElementById("finalSubmit");
                const submitText = document.getElementById("submitText");
                const submitSpinner = document.getElementById("submitSpinner");

                // Show loading
                submitBtn.disabled = true;
                submitText.textContent = "Criando conta...";
                submitSpinner.classList.remove("hidden");

                try {
                    // Simulate API call
                    await new Promise((resolve) => setTimeout(resolve, 3000));

                    // Simulate registration success
                    const success = Math.random() > 0.1; // 90% success rate

                    if (success) {
                        showSuccessStep();
                    } else {
                        throw new Error("Erro no servidor");
                    }
                } catch (error) {
                    showToast("Erro ao criar conta. Tente novamente.", "error");

                    // Reset button
                    submitBtn.disabled = false;
                    submitText.textContent = "Criar Conta";
                    submitSpinner.classList.add("hidden");
                }
            }

            function showSuccessStep() {
                document.getElementById("stepContent4").classList.add("hidden");
                document
                    .getElementById("successStep")
                    .classList.remove("hidden");

                // Update success message based on user type
                const successMessage =
                    document.getElementById("successMessage");
                if (userType === "doctor") {
                    successMessage.textContent =
                        "Sua conta médica foi criada! Seus documentos serão analisados em até 24 horas.";
                } else {
                    successMessage.textContent =
                        "Bem-vindo à TeleMed! Sua conta foi criada e você já pode fazer login.";
                }

                // Update step indicators to all completed
                for (let i = 1; i <= 4; i++) {
                    document.getElementById(`step${i}`).className =
                        "step-indicator step-completed flex items-center px-4 py-2 rounded-lg";
                }
            }

            function setupFormValidation() {
                // Real-time validation
                const inputs = document.querySelectorAll("input[required]");
                inputs.forEach((input) => {
                    input.addEventListener("blur", function () {
                        if (this.value.trim()) {
                            this.classList.remove("border-red-500");
                        }
                    });
                });

                // Phone formatting
                document
                    .getElementById("phone")
                    .addEventListener("input", function () {
                        let value = this.value.replace(/\D/g, "");
                        if (value.length >= 10) {
                            value = value.replace(
                                /(\d{2})(\d{5})(\d{4})/,
                                "($1) $2-$3",
                            );
                        } else if (value.length >= 6) {
                            value = value.replace(
                                /(\d{2})(\d{4})(\d+)/,
                                "($1) $2-$3",
                            );
                        } else if (value.length >= 2) {
                            value = value.replace(/(\d{2})(\d+)/, "($1) $2");
                        }
                        this.value = value;
                    });

                // CPF formatting
                const cpfInput = document.getElementById("cpf");
                if (cpfInput) {
                    cpfInput.addEventListener("input", function () {
                        let value = this.value.replace(/\D/g, "");
                        if (value.length <= 11) {
                            value = value.replace(
                                /(\d{3})(\d{3})(\d{3})(\d{2})/,
                                "$1.$2.$3-$4",
                            );
                            this.value = value;
                        }
                    });
                }
            }

            function setupPasswordStrength() {
                document
                    .getElementById("password")
                    .addEventListener("input", function () {
                        const password = this.value;
                        const strength = calculatePasswordStrength(password);
                        const strengthBar =
                            document.getElementById("passwordStrength");
                        const criteria =
                            document.getElementById("passwordCriteria");

                        // Update strength bar
                        strengthBar.style.width = `${strength.score * 25}%`;

                        if (strength.score <= 1) {
                            strengthBar.className =
                                "h-2 rounded-full transition-all duration-300 bg-red-500";
                        } else if (strength.score <= 2) {
                            strengthBar.className =
                                "h-2 rounded-full transition-all duration-300 bg-yellow-500";
                        } else if (strength.score <= 3) {
                            strengthBar.className =
                                "h-2 rounded-full transition-all duration-300 bg-blue-500";
                        } else {
                            strengthBar.className =
                                "h-2 rounded-full transition-all duration-300 bg-green-500";
                        }

                        // Update criteria
                        criteria.innerHTML = strength.criteria
                            .map(
                                (criterion) =>
                                    `<div class="${criterion.met ? "text-green-300" : "text-blue-200"}">
                        ${criterion.met ? "✓" : "•"} ${criterion.text}
                    </div>`,
                            )
                            .join("");
                    });
            }

            function calculatePasswordStrength(password) {
                const criteria = [
                    { text: "Mínimo 8 caracteres", met: password.length >= 8 },
                    {
                        text: "Pelo menos uma letra maiúscula",
                        met: /[A-Z]/.test(password),
                    },
                    { text: "Pelo menos um número", met: /\d/.test(password) },
                    {
                        text: "Pelo menos um caractere especial",
                        met: /[!@#$%^&*(),.?":{}|<>]/.test(password),
                    },
                ];

                const score = criteria.filter((c) => c.met).length;

                return { criteria, score };
            }

            function isPasswordStrong(password) {
                const strength = calculatePasswordStrength(password);
                return strength.score >= 4;
            }

            function validateCPF(cpf) {
                cpf = cpf.replace(/\D/g, "");

                if (cpf.length !== 11 || /^(\d)\1{10}$/.test(cpf)) {
                    return false;
                }

                let sum = 0;
                for (let i = 0; i < 9; i++) {
                    sum += parseInt(cpf.charAt(i)) * (10 - i);
                }
                let remainder = 11 - (sum % 11);
                if (remainder === 10 || remainder === 11) remainder = 0;
                if (remainder !== parseInt(cpf.charAt(9))) return false;

                sum = 0;
                for (let i = 0; i < 10; i++) {
                    sum += parseInt(cpf.charAt(i)) * (11 - i);
                }
                remainder = 11 - (sum % 11);
                if (remainder === 10 || remainder === 11) remainder = 0;
                if (remainder !== parseInt(cpf.charAt(10))) return false;

                return true;
            }

            function togglePassword(fieldId) {
                const field = document.getElementById(fieldId);
                const icon =
                    field.nextElementSibling.nextElementSibling.querySelector(
                        "i",
                    );

                if (field.type === "password") {
                    field.type = "text";
                    icon.className = "fas fa-eye-slash";
                } else {
                    field.type = "password";
                    icon.className = "fas fa-eye";
                }
            }

            function goToLogin() {
                window.location.href = "login.html";
            }

            function goHome() {
                window.location.href = "../index.html";
            }

            function goBack() {
                if (currentStep > 1) {
                    previousStep();
                } else {
                    window.location.href = "../index.html";
                }
            }

            function showToast(message, type = "info") {
                const toast = document.getElementById("toast");
                const colors = {
                    success: "bg-green-500",
                    error: "bg-red-500",
                    info: "bg-blue-500",
                    warning: "bg-yellow-500",
                };

                const icons = {
                    success: "fa-check-circle",
                    error: "fa-exclamation-circle",
                    info: "fa-info-circle",
                    warning: "fa-exclamation-triangle",
                };

                toast.className = `fixed top-4 right-4 z-50 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg flex items-center space-x-2 transform translate-x-full transition-transform duration-300`;
                toast.innerHTML = `
                <i class="fas ${icons[type]}"></i>
                <span>${message}</span>
            `;

                toast.classList.remove("hidden");
                setTimeout(() => {
                    toast.classList.remove("translate-x-full");
                }, 100);

                setTimeout(() => {
                    toast.classList.add("translate-x-full");
                    setTimeout(() => {
                        toast.classList.add("hidden");
                    }, 300);
                }, 4000);
            }

            // Keyboard navigation
            document.addEventListener("keydown", function (e) {
                if (e.key === "Enter" && e.ctrlKey) {
                    const currentForm = document.getElementById(
                        `step${currentStep}Form`,
                    );
                    if (currentForm) {
                        currentForm.dispatchEvent(new Event("submit"));
                    }
                }

                if (e.key === "Escape") {
                    goBack();
                }
            });

            // File upload simulation for doctors
            document.addEventListener("change", function (e) {
                if (e.target.type === "file" && e.target.files.length > 0) {
                    const fileName = e.target.files[0].name;
                    const uploadArea = e.target.parentElement;
                    uploadArea.classList.add("border-green-400", "bg-green-50");
                    uploadArea.querySelector("p").textContent = `✓ ${fileName}`;
                    showToast("Arquivo carregado com sucesso!", "success");
                }
            });
        </script>
    </body>
</html>
