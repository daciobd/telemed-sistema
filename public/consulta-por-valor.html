<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Lances - Consulta por Valor | TeleMed Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .bid-animation {
            animation: bidPulse 2s infinite;
        }
        @keyframes bidPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .lance-card {
            transition: all 0.3s ease;
        }
        .lance-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-green-50 to-blue-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
                <div class="flex items-center justify-center mb-4">
                    <div class="w-16 h-16 bg-gradient-to-r from-green-600 to-blue-600 rounded-full flex items-center justify-center">
                        <i class="fas fa-gavel text-white text-2xl"></i>
                    </div>
                </div>
                <h1 class="text-3xl font-bold text-gray-800 mb-2">Sistema de Lances Progressivos</h1>
                <p class="text-gray-600">Conecte-se com m√©dicos atrav√©s de lances competitivos para consultas personalizadas</p>
                <div class="mt-4">
                    <a href="/" class="text-blue-600 hover:text-blue-800 mr-4">‚Üê Voltar ao In√≠cio</a>
                    <a href="/guia-medicos.html" class="text-purple-600 hover:text-purple-800 mr-4">üìã Guia M√©dicos</a>
                    <a href="/index.html" class="text-purple-600 hover:text-purple-800 mr-4">üë®‚Äç‚öïÔ∏è Dashboard M√©dico</a>
                    <a href="/dr-ai.html" class="text-green-600 hover:text-green-800">ü§ñ Triagem IA</a>
                </div>
            </div>
        </div>

        <!-- Como Funciona o Sistema de Lances - Se√ß√£o Explicativa Completa -->
        <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
            <div class="text-center mb-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Como Funciona o Sistema de Lances</h2>
                <p class="text-gray-600 max-w-3xl mx-auto">
                    Nosso sistema conecta pacientes e m√©dicos de forma transparente e eficiente. 
                    Veja como √© simples usar nossa plataforma inovadora:
                </p>
            </div>
            
            <div class="grid md:grid-cols-4 gap-6">
                <!-- Passo 1 -->
                <div class="text-center">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-user-plus text-blue-600 text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-lg text-gray-800 mb-2">1. Cadastre sua Necessidade</h3>
                    <p class="text-gray-600 text-sm">
                        Informe a especialidade, tipo de consulta e valor inicial que voc√™ est√° disposto a pagar
                    </p>
                </div>

                <!-- Passo 2 -->
                <div class="text-center">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-search text-green-600 text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-lg text-gray-800 mb-2">2. M√©dicos Fazem Lances</h3>
                    <p class="text-gray-600 text-sm">
                        Profissionais qualificados competem pelo melhor valor para sua consulta
                    </p>
                </div>

                <!-- Passo 3 -->
                <div class="text-center">
                    <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-star text-purple-600 text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-lg text-gray-800 mb-2">3. Escolha o Melhor</h3>
                    <p class="text-gray-600 text-sm">
                        Analise perfis e escolha o m√©dico ideal baseado em valor, especializa√ß√£o e avalia√ß√µes
                    </p>
                </div>

                <!-- Passo 4 -->
                <div class="text-center">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-video text-red-600 text-2xl"></i>
                    </div>
                    <h3 class="font-bold text-lg text-gray-800 mb-2">4. Realize a Consulta</h3>
                    <p class="text-gray-600 text-sm">
                        Agende e realize sua consulta com seguran√ßa atrav√©s de nossa plataforma
                    </p>
                </div>
            </div>

            <!-- Vantagens do Sistema -->
            <div class="mt-8 bg-gradient-to-r from-blue-50 to-green-50 rounded-xl p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-4 text-center">Por que usar nosso Sistema de Lances?</h3>
                <div class="grid md:grid-cols-3 gap-4">
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-check text-white text-sm"></i>
                        </div>
                        <span class="text-gray-700"><strong>Pre√ßos Justos:</strong> Competi√ß√£o garante valores acess√≠veis</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-check text-white text-sm"></i>
                        </div>
                        <span class="text-gray-700"><strong>Transpar√™ncia:</strong> Veja todos os lances em tempo real</span>
                    </div>
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-check text-white text-sm"></i>
                        </div>
                        <span class="text-gray-700"><strong>Qualidade:</strong> M√©dicos verificados e qualificados</span>
                    </div>
                </div>
            </div>

            <!-- Bot√£o para Iniciar Lance -->
            <div class="text-center mt-6">
                <button onclick="showBidForm()" class="bg-gradient-to-r from-blue-600 to-green-600 text-white px-8 py-3 rounded-lg hover:from-blue-700 hover:to-green-700 transition-all font-bold text-lg shadow-lg">
                    <i class="fas fa-plus mr-2"></i>Criar Novo Lance de Consulta
                </button>
            </div>
        </div>

        <!-- Formul√°rio de Novo Lance (Oculto inicialmente) -->
        <div id="bidForm" class="bg-white rounded-2xl shadow-lg p-8 mb-8 hidden">
            <h3 class="text-xl font-bold text-gray-800 mb-6">Criar Nova Solicita√ß√£o de Consulta</h3>
            <form onsubmit="createNewBid(event)" class="space-y-4">
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Especialidade M√©dica</label>
                        <select class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                            <option value="">Selecione a especialidade</option>
                            <option value="cardiologia">Cardiologia</option>
                            <option value="pediatria">Pediatria</option>
                            <option value="dermatologia">Dermatologia</option>
                            <option value="ginecologia">Ginecologia</option>
                            <option value="psiquiatria">Psiquiatria</option>
                            <option value="clinica-geral">Cl√≠nica Geral</option>
                            <option value="ortopedia">Ortopedia</option>
                            <option value="neurologia">Neurologia</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Valor Inicial do Lance</label>
                        <div class="relative">
                            <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 font-semibold">R$</span>
                            <input type="number" placeholder="149" class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" min="60" step="1" required>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">Valor m√≠nimo: R$ 60</p>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">Descri√ß√£o dos Sintomas/Necessidades</label>
                    <textarea placeholder="Descreva brevemente seus sintomas ou necessidades m√©dicas..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 h-24 resize-none" required></textarea>
                </div>

                <div class="flex justify-end space-x-4">
                    <button type="button" onclick="hideBidForm()" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                        Cancelar
                    </button>
                    <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                        <i class="fas fa-rocket mr-2"></i>Iniciar Lance
                    </button>
                </div>
            </form>
        </div>

        <!-- Active Auctions -->
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            <!-- Consulta Cardiologia -->
            <div class="lance-card bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-bold text-lg text-gray-800">Consulta Cardiologia</h3>
                    <span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full">Urgente</span>
                </div>
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Lance Atual:</span>
                        <span class="text-2xl font-bold text-green-600 bid-animation">R$ 180</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Tempo Restante:</span>
                        <span class="text-red-600 font-semibold">12:45</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">M√©dicos Interessados:</span>
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">5</span>
                    </div>
                    <div class="mt-4 bid-section">
                        <div class="bid-input-wrapper">
                            <label class="text-sm font-semibold text-gray-700 mb-2 block">Seu Lance:</label>
                            <div class="relative">
                                <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 font-semibold">R$</span>
                                <input type="number" placeholder="185" class="w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg mb-3 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all" min="185" step="5" value="185">
                            </div>
                            <p class="text-xs text-gray-500 mb-3">M√≠nimo: R$ 185 ‚Ä¢ Sugest√£o: R$ 190-200</p>
                        </div>
                        <div class="space-y-2">
                            <button onclick="attendPatient('Maria Silva')" class="w-full bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 transition-colors font-bold">
                                üö® ATENDER AGORA - R$ 300
                            </button>
                            <button onclick="submitBid(this, 'Cardiologia')" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors">
                                <i class="fas fa-gavel mr-2"></i>Fazer Lance
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Teleconsulta Pediatria -->
            <div class="lance-card bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-bold text-lg text-gray-800">Teleconsulta Pediatria</h3>
                    <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">Regular</span>
                </div>
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Lance Atual:</span>
                        <span class="text-2xl font-bold text-green-600 bid-animation">R$ 150</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Tempo Restante:</span>
                        <span class="text-orange-600 font-semibold">25:30</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">M√©dicos Interessados:</span>
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">3</span>
                    </div>
                    <div class="mt-4 bid-section">
                        <div class="bid-input-wrapper">
                            <label class="text-sm font-semibold text-gray-700 mb-2 block">Seu Lance:</label>
                            <div class="relative">
                                <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 font-semibold">R$</span>
                                <input type="number" placeholder="155" class="w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg mb-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all" min="155" step="5" value="155">
                            </div>
                            <p class="text-xs text-gray-500 mb-3">M√≠nimo: R$ 155 ‚Ä¢ Sugest√£o: R$ 160-170</p>
                        </div>
                        <div class="space-y-2">
                            <button onclick="attendPatient('Ana Costa')" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors font-bold">
                                ‚ñ∂Ô∏è Atender Agora - R$ 150
                            </button>
                            <button onclick="submitBid(this, 'Pediatria')" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors">
                                <i class="fas fa-gavel mr-2"></i>Fazer Lance
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Consulta Dermatologia -->
            <div class="lance-card bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-bold text-lg text-gray-800">Consulta Dermatologia</h3>
                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">Agendado</span>
                </div>
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Lance Atual:</span>
                        <span class="text-2xl font-bold text-green-600 bid-animation">R$ 120</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Tempo Restante:</span>
                        <span class="text-green-600 font-semibold">45:15</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">M√©dicos Interessados:</span>
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">7</span>
                    </div>
                    <div class="mt-4 bid-section">
                        <div class="bid-input-wrapper">
                            <label class="text-sm font-semibold text-gray-700 mb-2 block">Seu Lance:</label>
                            <div class="relative">
                                <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 font-semibold">R$</span>
                                <input type="number" placeholder="125" class="w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg mb-3 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all" min="125" step="5" value="125">
                            </div>
                            <p class="text-xs text-gray-500 mb-3">M√≠nimo: R$ 125 ‚Ä¢ Sugest√£o: R$ 130-140</p>
                        </div>
                        <div class="space-y-2">
                            <button onclick="scheduleConsultation('Jo√£o Santos', '22:00')" class="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors font-bold">
                                üìÖ Agendar 22h - R$ 120
                            </button>
                            <button onclick="submitBid(this, 'Dermatologia')" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors">
                                <i class="fas fa-gavel mr-2"></i>Fazer Lance
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Create New Auction -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">
                <i class="fas fa-plus-circle text-blue-600 mr-2"></i>
                Criar Nova Consulta por Lance
            </h2>
            <div class="grid md:grid-cols-2 gap-6">
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Especialidade M√©dica</label>
                        <select class="w-full p-3 border rounded-lg">
                            <option value="">Selecione a especialidade</option>
                            <option value="cardiologia">Cardiologia</option>
                            <option value="pediatria">Pediatria</option>
                            <option value="dermatologia">Dermatologia</option>
                            <option value="neurologia">Neurologia</option>
                            <option value="ortopedia">Ortopedia</option>
                            <option value="ginecologia">Ginecologia</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Tipo de Consulta</label>
                        <select class="w-full p-3 border rounded-lg">
                            <option value="">Selecione o tipo</option>
                            <option value="presencial">Consulta Presencial</option>
                            <option value="teleconsulta">Teleconsulta</option>
                            <option value="urgente">Consulta Urgente</option>
                            <option value="retorno">Consulta de Retorno</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Lance Inicial (R$)</label>
                        <input type="number" class="w-full p-3 border rounded-lg" placeholder="100" min="50" step="10">
                    </div>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Data Preferida</label>
                        <input type="date" class="w-full p-3 border rounded-lg">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Hor√°rio Preferido</label>
                        <select class="w-full p-3 border rounded-lg">
                            <option value="">Selecione o hor√°rio</option>
                            <option value="manha">Manh√£ (8h-12h)</option>
                            <option value="tarde">Tarde (13h-17h)</option>
                            <option value="noite">Noite (18h-22h)</option>
                            <option value="flexivel">Hor√°rio Flex√≠vel</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Dura√ß√£o do Lance (minutos)</label>
                        <select class="w-full p-3 border rounded-lg">
                            <option value="30">30 minutos</option>
                            <option value="60">1 hora</option>
                            <option value="120">2 horas</option>
                            <option value="240">4 horas</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="mt-6">
                <label class="block text-gray-700 font-semibold mb-2">Descri√ß√£o dos Sintomas/Necessidades</label>
                <textarea class="w-full p-3 border rounded-lg h-24" placeholder="Descreva brevemente seus sintomas ou necessidades m√©dicas..."></textarea>
            </div>
            <div class="mt-6 text-center">
                <button onclick="submitNewBid()" class="bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors">
                    <i class="fas fa-rocket mr-2"></i>Iniciar Lance
                </button>
            </div>
        </div>

        <!-- How It Works -->
        <div class="bg-white rounded-xl shadow-lg p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Como Funciona o Sistema de Lances</h2>
            <div class="grid md:grid-cols-4 gap-6">
                <div class="text-center">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-user-plus text-blue-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2">1. Cadastre sua Necessidade</h3>
                    <p class="text-gray-600 text-sm">Informe a especialidade, tipo de consulta e valor inicial</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-search text-green-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2">2. M√©dicos Fazem Lances</h3>
                    <p class="text-gray-600 text-sm">Profissionais qualificados competem pelo melhor valor</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-gavel text-purple-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2">3. Escolha o Melhor</h3>
                    <p class="text-gray-600 text-sm">Analise perfis e escolha o m√©dico ideal</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-handshake text-red-600 text-2xl"></i>
                    </div>
                    <h3 class="font-semibold text-gray-800 mb-2">4. Realize a Consulta</h3>
                    <p class="text-gray-600 text-sm">Agende e realize sua consulta com seguran√ßa</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tracking GA4
        function trackCTA(action, label) {
            if (typeof gtag !== 'undefined') {
                gtag('event', 'click', {
                    'event_category': 'CTA',
                    'event_label': label,
                    'value': action === 'conversion' ? 1 : 0
                });
            }
        }

        // Detectar par√¢metro de especialidade na URL
        function getSpecialtyFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const especialidade = urlParams.get('especialidade');
            
            if (especialidade) {
                // Track specialty parameter received
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'specialty_parameter', {
                        'event_category': 'URL Parameter',
                        'event_label': especialidade,
                        'value': 1
                    });
                }
                
                // Pre-select specialty in form if available
                preSelectSpecialty(especialidade);
                
                // Show specialty-specific message
                showSpecialtyMessage(especialidade);
            }
        }

        // Pr√©-selecionar especialidade no formul√°rio
        function preSelectSpecialty(especialidade) {
            const specialtySelect = document.querySelector('#bid-form select');
            if (specialtySelect) {
                // Map URL slugs to form values
                const specialtyMap = {
                    'clinica-geral': 'Cl√≠nica Geral',
                    'psiquiatria': 'Psiquiatria',
                    'psicoterapia': 'Psicoterapia',
                    'pediatria': 'Pediatria',
                    'ginecologia': 'Ginecologia',
                    'nutricao': 'Nutri√ß√£o',
                    'dermatologia': 'Dermatologia',
                    'ortopedia': 'Ortopedia'
                };
                
                const formValue = specialtyMap[especialidade];
                if (formValue) {
                    specialtySelect.value = formValue;
                    console.log('üéØ Especialidade pr√©-selecionada:', formValue);
                }
            }
        }

        // Mostrar mensagem espec√≠fica da especialidade
        function showSpecialtyMessage(especialidade) {
            const specialtyNames = {
                'clinica-geral': 'Cl√≠nica Geral',
                'psiquiatria': 'Psiquiatria',
                'psicoterapia': 'Psicoterapia',
                'pediatria': 'Pediatria',
                'ginecologia': 'Ginecologia',
                'nutricao': 'Nutri√ß√£o',
                'dermatologia': 'Dermatologia',
                'ortopedia': 'Ortopedia'
            };
            
            const specialtyName = specialtyNames[especialidade] || especialidade;
            
            // Create specialty banner
            const banner = document.createElement('div');
            banner.className = 'bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mb-6 rounded-r-lg';
            banner.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-info-circle mr-3 text-blue-500"></i>
                    <div>
                        <p class="font-medium">Especialidade Selecionada: ${specialtyName}</p>
                        <p class="text-sm">Voc√™ ser√° conectado preferencialmente com m√©dicos desta especialidade.</p>
                    </div>
                </div>
            `;
            
            // Insert banner after header
            const header = document.querySelector('.container .text-center');
            if (header && header.nextElementSibling) {
                header.nextElementSibling.insertBefore(banner, header.nextElementSibling.firstChild);
            }
        }

        // Track page view
        if (typeof gtag !== 'undefined') {
            gtag('event', 'page_view', {
                'page_title': 'Sistema de Lances',
                'page_location': window.location.href
            });
        }

        // Initialize specialty detection
        document.addEventListener('DOMContentLoaded', function() {
            getSpecialtyFromURL();
        });

        // Fun√ß√µes de navega√ß√£o para consultas
        function attendPatient(patientName) {
            // Track consultation start
            if (typeof gtag !== 'undefined') {
                gtag('event', 'consultation_start', {
                    'event_category': 'Medical Consultation',
                    'event_label': patientName,
                    'value': 1
                });
            }
            
            alert(`‚úÖ Atendimento aceito!\n\nPaciente: ${patientName}\nRedirecionando para videoconsulta...`);
            setTimeout(() => {
                window.location.href = '/videoconsulta.html';
            }, 1500);
        }

        function scheduleConsultation(patientName, time) {
            alert(`üìÖ Consulta agendada!\n\nPaciente: ${patientName}\nHor√°rio: ${time}\nRedirecionando para videoconsulta...`);
            setTimeout(() => {
                window.location.href = '/videoconsulta.html';
            }, 1500);
        }

        // Navega√ß√£o direta para dashboard m√©dico
        function goToDashboard() {
            window.location.href = '/index.html';
        }

        // Fun√ß√£o para submeter lance com anima√ß√µes e feedback visual
        function submitBid(button, specialty) {
            const inputElement = button.parentElement.parentElement.querySelector('input[type="number"]');
            const bidValue = inputElement.value;
            const bidValueNum = parseFloat(bidValue);
            
            // Track bid attempt
            if (typeof gtag !== 'undefined') {
                gtag('event', 'bid_attempt', {
                    'event_category': 'Bid Interaction',
                    'event_label': specialty,
                    'value': bidValueNum || 0
                });
            }
            
            // Valida√ß√£o mais robusta
            if (!bidValue || bidValue.trim() === '' || isNaN(bidValueNum) || bidValueNum <= 0) {
                showErrorFeedback(inputElement, 'Por favor, insira um valor v√°lido!');
                return;
            }
            
            const minValue = parseInt(inputElement.getAttribute('min')) || 149;
            if (bidValueNum < minValue) {
                showErrorFeedback(inputElement, `Lance m√≠nimo: R$ ${minValue}`);
                return;
            }
            
            // Anima√ß√£o de envio
            button.disabled = true;
            button.style.transform = 'scale(0.95)';
            button.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Enviando...';
            
            // Simular processo de lance
            setTimeout(() => {
                // Sucesso visual
                button.innerHTML = '<i class="fas fa-check mr-2"></i>Lance Enviado!';
                button.className = button.className.replace('bg-green-600', 'bg-green-500');
                
                // Notifica√ß√£o de sucesso melhorada
                showSuccessModal(specialty, bidValue);
                
                // Atualizar valor na tela com anima√ß√£o
                const currentBidElement = button.parentElement.parentElement.parentElement.querySelector('.bid-animation');
                if (currentBidElement) {
                    currentBidElement.style.transform = 'scale(1.1)';
                    currentBidElement.style.color = '#059669';
                    currentBidElement.textContent = `R$ ${bidValue}`;
                    
                    setTimeout(() => {
                        currentBidElement.style.transform = 'scale(1)';
                    }, 300);
                }
                
                // Simular atualiza√ß√£o no dashboard m√©dico
                updateMedicalDashboard(specialty, bidValue);
                
                // Reset do bot√£o ap√≥s sucesso
                setTimeout(() => {
                    button.disabled = false;
                    button.style.transform = 'scale(1)';
                    button.innerHTML = '<i class="fas fa-gavel mr-2"></i>Novo Lance';
                    button.className = button.className.replace('bg-green-500', 'bg-blue-600');
                }, 3000);
                
            }, 1500);
        }
        
        // Fun√ß√£o para mostrar feedback de erro
        function showErrorFeedback(inputElement, message) {
            inputElement.style.borderColor = '#ef4444';
            inputElement.style.boxShadow = '0 0 0 3px rgba(239, 68, 68, 0.1)';
            
            // Criar tooltip de erro
            const tooltip = document.createElement('div');
            tooltip.className = 'error-tooltip';
            tooltip.textContent = message;
            tooltip.style.cssText = `
                position: absolute; 
                background: #ef4444; 
                color: white; 
                padding: 8px 12px; 
                border-radius: 6px; 
                font-size: 12px; 
                top: -40px; 
                left: 50%; 
                transform: translateX(-50%); 
                z-index: 1000;
                box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            `;
            
            inputElement.parentElement.style.position = 'relative';
            inputElement.parentElement.appendChild(tooltip);
            inputElement.focus();
            inputElement.select();
            
            // Remover feedback ap√≥s 3 segundos
            setTimeout(() => {
                inputElement.style.borderColor = '#d1d5db';
                inputElement.style.boxShadow = '';
                if (tooltip.parentElement) {
                    tooltip.parentElement.removeChild(tooltip);
                }
            }, 3000);
        }
        
        // Fun√ß√£o para mostrar modal de sucesso
        function showSuccessModal(specialty, bidValue) {
            const modal = document.createElement('div');
            modal.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 10000; display: flex; align-items: center; justify-content: center;">
                    <div style="background: white; padding: 30px; border-radius: 15px; max-width: 400px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                        <div style="font-size: 48px; margin-bottom: 20px;">üéØ</div>
                        <h3 style="color: #059669; font-size: 24px; margin-bottom: 15px; font-weight: bold;">Lance Enviado!</h3>
                        <p style="color: #6b7280; margin-bottom: 20px;">
                            <strong>Especialidade:</strong> ${specialty}<br>
                            <strong>Valor:</strong> R$ ${bidValue}<br><br>
                            <em>Voc√™ receber√° notifica√ß√£o se for selecionado!</em>
                        </p>
                        <button onclick="this.parentElement.parentElement.remove(); window.location.href='/aguardando-medico.html';" style="background: #059669; color: white; padding: 12px 24px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
                            Entendi ‚úì
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            
            // Auto-remover ap√≥s 5 segundos
            setTimeout(() => {
                if (modal.parentElement) {
                    modal.parentElement.removeChild(modal);
                }
            }, 5000);
        }
        
        // Fun√ß√£o para simular atualiza√ß√£o no dashboard m√©dico
        function updateMedicalDashboard(specialty, bidValue) {
            // Lista de nomes brasileiros realistas
            const patientNames = [
                'Jo√£o Silva', 'Maria Santos', 'Carlos Oliveira', 'Ana Costa', 'Paulo Ferreira',
                'Lucia Pereira', 'Jos√© Rodrigues', 'Fernanda Lima', 'Roberto Almeida', 'Camila Souza',
                'Rafael Martins', 'Juliana Barbosa', 'Marcos Ribeiro', 'Tatiana Gomes', 'Diego Carvalho',
                'Beatriz Nunes', 'Thiago Nascimento', 'Priscila Moura', 'Eduardo Teixeira', 'Vanessa Rocha',
                'Gabriel Monteiro', 'Bianca Castro', 'Leonardo Torres', 'Adriana Dias', 'Henrique Cardoso'
            ];
            
            const randomName = patientNames[Math.floor(Math.random() * patientNames.length)];
            
            // Simular notifica√ß√£o para o dashboard m√©dico
            console.log(`üè• DASHBOARD M√âDICO ATUALIZADO: Nova consulta ${specialty} - R$ ${bidValue} aguardando`);
            
            // Simular localStorage para persistir dados entre p√°ginas
            const bids = JSON.parse(localStorage.getItem('telemed_bids') || '[]');
            bids.push({
                id: Date.now(),
                specialty: specialty,
                value: bidValue,
                status: 'aguardando',
                timestamp: new Date().toISOString(),
                patient: randomName
            });
            localStorage.setItem('telemed_bids', JSON.stringify(bids));
        }

        // Atualizar contadores de tempo em tempo real
        function updateTimers() {
            const timers = document.querySelectorAll('.text-red-600, .text-orange-600, .text-green-600');
            timers.forEach(timer => {
                if (timer.textContent.includes(':')) {
                    const [minutes, seconds] = timer.textContent.split(':').map(Number);
                    let totalSeconds = minutes * 60 + seconds;
                    totalSeconds--;
                    if (totalSeconds >= 0) {
                        const newMinutes = Math.floor(totalSeconds / 60);
                        const newSeconds = totalSeconds % 60;
                        timer.textContent = `${newMinutes}:${newSeconds.toString().padStart(2, '0')}`;
                    }
                }
            });
        }

        // Atualizar a cada segundo
        setInterval(updateTimers, 1000);

        // Simular atualiza√ß√µes de lances
        function updateBids() {
            const bids = document.querySelectorAll('.bid-animation');
            bids.forEach(bid => {
                if (Math.random() > 0.8) { // 20% chance de atualizar
                    const currentValue = parseInt(bid.textContent.replace('R$ ', ''));
                    const increase = Math.floor(Math.random() * 20) + 5;
                    bid.textContent = `R$ ${currentValue + increase}`;
                }
            });
        }

        // Atualizar lances a cada 10 segundos
        setInterval(updateBids, 10000);

        // Fun√ß√£o para mostrar formul√°rio de novo lance
        function showBidForm() {
            document.getElementById('bidForm').classList.remove('hidden');
            document.getElementById('bidForm').scrollIntoView({ behavior: 'smooth' });
        }

        // Fun√ß√£o para esconder formul√°rio de novo lance
        function hideBidForm() {
            document.getElementById('bidForm').classList.add('hidden');
        }

        // Fun√ß√£o para criar novo lance
        function createNewBid(event) {
            event.preventDefault();
            
            const form = event.target;
            const specialty = form.querySelector('select').value;
            const value = form.querySelector('input[type="number"]').value;
            const description = form.querySelector('textarea').value;
            
            // Track form submission attempt
            if (typeof gtag !== 'undefined') {
                gtag('event', 'form_submit', {
                    'event_category': 'New Bid Form',
                    'event_label': specialty || 'Incomplete',
                    'value': parseInt(value) || 0
                });
            }
            
            if (!specialty || !value || !description) {
                alert('Por favor, preencha todos os campos obrigat√≥rios.');
                return;
            }
            
            if (parseInt(value) < 60) {
                alert('O valor m√≠nimo para um lance √© R$ 60.');
                return;
            }
            
            // Criar nova solicita√ß√£o
            console.log('üÜï Criando nova solicita√ß√£o:', { specialty, value, description });
            
            // Simular envio para o backend
            setTimeout(() => {
                // Esconder formul√°rio
                hideBidForm();
                
                // Mostrar modal de sucesso
                showSuccessModal(specialty, value);
                
                // Adicionar √† lista de lances ativos (simula√ß√£o)
                addNewBidToList(specialty, value, description);
                
                // Reset do formul√°rio
                form.reset();
                
            }, 1000);
        }

        // Fun√ß√£o para adicionar novo lance √† lista
        function addNewBidToList(specialty, value, description) {
            const container = document.querySelector('.grid.md\\:grid-cols-2.lg\\:grid-cols-3');
            
            const newCard = document.createElement('div');
            newCard.className = 'lance-card bg-white rounded-xl shadow-lg p-6';
            newCard.innerHTML = `
                <div class="flex items-center justify-between mb-4">
                    <h3 class="font-bold text-lg text-gray-800">Consulta ${specialty}</h3>
                    <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">Novo</span>
                </div>
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Lance Inicial:</span>
                        <span class="text-2xl font-bold text-green-600 bid-animation">R$ ${value}</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">Tempo Restante:</span>
                        <span class="text-green-600 font-semibold">59:59</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">M√©dicos Interessados:</span>
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm">0</span>
                    </div>
                    <div class="mt-4">
                        <p class="text-sm text-gray-600 mb-3"><strong>Descri√ß√£o:</strong> ${description}</p>
                        <div class="space-y-2">
                            <button class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                <i class="fas fa-clock mr-2"></i>Aguardando M√©dicos
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            container.insertBefore(newCard, container.firstChild);
            
            // Anima√ß√£o de entrada
            newCard.style.opacity = '0';
            newCard.style.transform = 'translateY(20px)';
            setTimeout(() => {
                newCard.style.transition = 'all 0.5s ease';
                newCard.style.opacity = '1';
                newCard.style.transform = 'translateY(0)';
            }, 100);
        }

        // Fun√ß√£o para submeter novo lance do formul√°rio
        function submitNewBid() {
            console.log('üöÄ Iniciando submiss√£o de novo lance...');
            console.log('üîç Event object:', event);
            
            // Coletar dados do formul√°rio
            const specialty = document.querySelector('select').value;
            const consultType = document.querySelectorAll('select')[1].value;
            const bidAmount = document.querySelector('input[type="number"]').value;
            const preferredDate = document.querySelector('input[type="date"]').value;
            const preferredTime = document.querySelectorAll('select')[2].value;
            const duration = document.querySelectorAll('select')[3].value;
            const symptoms = document.querySelector('textarea').value;
            
            console.log('üìã Dados coletados:', {
                specialty, consultType, bidAmount, preferredDate, preferredTime, duration, symptoms
            });
            
            // Valida√ß√£o cr√≠tica
            if (!specialty || !consultType || !bidAmount || !symptoms) {
                alert('‚ö†Ô∏è ERRO: Preencha todos os campos obrigat√≥rios!\n\n' +
                      '‚Ä¢ Especialidade M√©dica\n' +
                      '‚Ä¢ Tipo de Consulta\n' +
                      '‚Ä¢ Lance Inicial\n' +
                      '‚Ä¢ Descri√ß√£o dos Sintomas');
                return;
            }
            
            const bidAmountNum = parseFloat(bidAmount);
            if (isNaN(bidAmountNum) || bidAmountNum < 50) {
                alert('‚ö†Ô∏è ERRO: Lance m√≠nimo √© R$ 50');
                return;
            }
            
            // Anima√ß√£o de envio
            const button = event.target;
            button.disabled = true;
            button.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Processando Lance...';
            button.style.transform = 'scale(0.95)';
            
            // Lista de nomes brasileiros realistas
            const patientNames = [
                'Jo√£o Silva', 'Maria Santos', 'Carlos Oliveira', 'Ana Costa', 'Paulo Ferreira',
                'Lucia Pereira', 'Jos√© Rodrigues', 'Fernanda Lima', 'Roberto Almeida', 'Camila Souza',
                'Rafael Martins', 'Juliana Barbosa', 'Marcos Ribeiro', 'Tatiana Gomes', 'Diego Carvalho',
                'Beatriz Nunes', 'Thiago Nascimento', 'Priscila Moura', 'Eduardo Teixeira', 'Vanessa Rocha'
            ];
            
            const randomName = patientNames[Math.floor(Math.random() * patientNames.length)];
            
            // Mapear especialidades para formato consistente
            const specialtyMap = {
                'cardiologia': 'Cardiologia',
                'pediatria': 'Pediatria', 
                'dermatologia': 'Dermatologia',
                'neurologia': 'Neurologia',
                'ortopedia': 'Ortopedia',
                'ginecologia': 'Ginecologia'
            };
            
            const mappedSpecialty = specialtyMap[specialty] || specialty;
            
            // Simular processo de envio
            setTimeout(() => {
                // Criar objeto de lance completo
                const newBid = {
                    id: Date.now(),
                    specialty: mappedSpecialty,
                    consultType: consultType,
                    value: bidAmountNum,
                    preferredDate: preferredDate,
                    preferredTime: preferredTime,
                    duration: duration,
                    symptoms: symptoms,
                    status: 'aguardando',
                    timestamp: new Date().toISOString(),
                    patient: randomName
                };
                
                console.log('üíæ Salvando lance:', newBid);
                
                // Salvar no localStorage
                const existingBids = JSON.parse(localStorage.getItem('telemed_bids') || '[]');
                existingBids.push(newBid);
                localStorage.setItem('telemed_bids', JSON.stringify(existingBids));
                
                console.log('‚úÖ Lance salvo com sucesso! Total de lances:', existingBids.length);
                
                // Success feedback
                button.innerHTML = '<i class="fas fa-check mr-2"></i>Lance Criado! Redirecionando...';
                button.className = button.className.replace('bg-blue-600', 'bg-green-600');
                button.style.transform = 'scale(1)';
                
                // Redirect DIRECTLY to waiting page
                console.log('üîÑ REDIRECIONANDO DIRETAMENTE para aguardando...');
                console.log('üåê URL atual:', window.location.href);
                console.log('üéØ Tentando redirecionar para: /aguardando-medico.html');
                
                // Try multiple redirect approaches
                setTimeout(() => {
                    console.log('‚è∞ Executando redirecionamento...');
                    try {
                        window.location.href = '/aguardando-medico.html';
                        console.log('‚úÖ Redirect chamado via href');
                    } catch (error) {
                        console.error('‚ùå Erro no redirect:', error);
                        // Fallback
                        window.location.replace('/aguardando-medico.html');
                    }
                }, 1000);
                
                // Reset form
                setTimeout(() => {
                    document.querySelector('select').selectedIndex = 0;
                    document.querySelectorAll('select')[1].selectedIndex = 0;
                    document.querySelector('input[type="number"]').value = '';
                    document.querySelector('input[type="date"]').value = '';
                    document.querySelectorAll('select')[2].selectedIndex = 0;
                    document.querySelectorAll('select')[3].selectedIndex = 0;
                    document.querySelector('textarea').value = '';
                    
                    button.disabled = false;
                    button.innerHTML = '<i class="fas fa-rocket mr-2"></i>Iniciar Lance';
                    button.className = button.className.replace('bg-green-600', 'bg-blue-600');
                }, 3000);
                
            }, 2000);
        }
        
        // Modal de sucesso para novo lance
        function showNewBidSuccessModal(specialty, bidAmount, patientName) {
            const modal = document.createElement('div');
            modal.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 10000; display: flex; align-items: center; justify-content: center;">
                    <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                        <div style="font-size: 48px; margin-bottom: 20px;">üéØ</div>
                        <h3 style="color: #059669; font-size: 24px; margin-bottom: 15px; font-weight: bold;">Lance Criado com Sucesso!</h3>
                        <div style="background: #f0f9ff; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <p style="color: #374151; margin-bottom: 10px;">
                                <strong>Paciente:</strong> ${patientName}<br>
                                <strong>Especialidade:</strong> ${specialty}<br>
                                <strong>Valor:</strong> R$ ${bidAmount}
                            </p>
                        </div>
                        <p style="color: #6b7280; margin-bottom: 20px;">
                            <strong>üè• Seu lance foi adicionado √† fila m√©dica!</strong><br>
                            <em>M√©dicos podem ver e atender em tempo real.</em>
                        </p>
                        <div style="display: flex; gap: 10px; justify-content: center;">
                            <button id="waiting-btn" style="background: #059669; color: white; padding: 12px 24px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
                                Entendi ‚úì
                            </button>
                            <button onclick="window.location.href='/dashboard-aquarela'" style="background: #2563eb; color: white; padding: 12px 24px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
                                Ver Dashboard üë®‚Äç‚öïÔ∏è
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            
            // Add click event to the waiting button
            const waitingBtn = modal.querySelector('#waiting-btn');
            waitingBtn.addEventListener('click', function() {
                console.log('üîÑ Redirecionando para p√°gina de aguardando...');
                document.body.removeChild(modal);
                window.location.href = '/aguardando-medico.html';
            });
            
            // Auto-remover ap√≥s 10 segundos
            setTimeout(() => {
                if (modal.parentElement) {
                    modal.parentElement.removeChild(modal);
                }
            }, 10000);
        }

        // Fun√ß√£o para ir para p√°gina de aguardando m√©dico
        function goToWaitingPage() {
            // Close the modal first
            const modal = document.querySelector('[style*="position: fixed"]');
            if (modal && modal.parentElement) {
                modal.parentElement.removeChild(modal);
            }
            
            console.log('‚è∞ Redirecionando para p√°gina de aguardando m√©dico...');
            window.location.href = '/aguardando-medico.html';
        }

        console.log('üí∞ Sistema de Lances TeleMed Ativo - Fluxo Completo - v2.1 CACHE_BUST_' + Date.now());
    </script>
</body>
</html>