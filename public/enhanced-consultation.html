<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Consulta Avançada • TeleMed</title>
<link rel="icon" type="image/svg+xml"
  href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect rx='12' width='64' height='64' fill='%231e40af'/%3E%3Ctext x='32' y='42' font-family='Inter,Arial' font-size='36' text-anchor='middle' fill='white'%3ETM%3C/text%3E%3C/svg%3E">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0f172a; --panel:#111827; --ink:#e5e7eb; --muted:#9ca3af;
  --ok:#16a34a; --warn:#f59e0b; --danger:#ef4444; --info:#3b82f6;
  --card:#0b1220; --card2:#0b1322; --ring:rgba(59,130,246,.35);
  --chip:#0b213d; --line:rgba(255,255,255,.08); --brand:#60a5fa;
}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;background:#0a0f1a;color:var(--ink)}
.app{display:flex; height:100vh; width:100vw; overflow:hidden}

/* ===== topo ===== */
.top{
  position:sticky; top:0; z-index:30;
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; padding:10px 14px; background:#0b1322; border-bottom:1px solid var(--line)
}
.pinfo{display:flex; align-items:center; gap:10px}
.avatar{width:28px;height:28px;border-radius:999px;background:#1f2937;display:grid;place-items:center;font-weight:700}
.pmeta{display:flex; gap:12px; color:var(--muted); font-size:12px}
.badge{font-size:12px; padding:4px 8px; border-radius:999px; background:#0b213d; border:1px solid var(--line)}
.btn{display:inline-flex;align-items:center;gap:8px;padding:9px 12px;border-radius:10px;border:1px solid var(--line);cursor:pointer;background:#0e1629;color:var(--ink)}
.btn:hover{border-color:var(--ring)}
.btn.green{background:#0b2a16;border-color:#14532d;color:#86efac}
.btn.blue{background:#0b213d;border-color:#1e40af;color:#93c5fd}
.btn.red{background:#2a0b0b;border-color:#7f1d1d;color:#fca5a5}
.btn.yellow{background:#2a210b;border-color:#854d0e;color:#fde68a}
.stat{display:flex; align-items:center; gap:10px}
.dot{width:8px;height:8px;border-radius:999px;background:#22c55e;box-shadow:0 0 0 3px rgba(34,197,94,.15)}
.timer{font-variant-numeric:tabular-nums;color:var(--muted);font-size:12px}

/* ===== layout principal ===== */
.main{display:flex; flex:1; min-height:0}

/* vídeo à esquerda */
.left{flex:1.6; min-width:0; position:relative; background:radial-gradient(1200px 600px at -20% 120%, #091226, #0b1220)}
.wait{position:absolute; inset:0; display:grid; place-items:center; color:#cbd5e1}
.wait .cam{font-size:48px; opacity:.2}
.room{position:absolute; bottom:16px; left:18px; font-size:12px; color:#9ca3af}
.badgeOn{display:inline-flex;align-items:center;gap:6px;background:#052e16;color:#86efac;border:1px solid #14532d;padding:4px 8px;border-radius:999px}

/* cronômetro no canto */
.clock{position:absolute; top:14px; right:14px; background:#0b213d; padding:6px 10px; border-radius:10px; color:#cbd5e1; font-variant-numeric:tabular-nums}

/* toolbar inferior */
.toolbar{
  position:absolute; left:50%; bottom:16px; transform:translateX(-50%);
  display:flex; gap:12px; background:#0b1322; padding:10px 12px; border:1px solid var(--line); border-radius:999px
}
.ico{width:38px;height:38px;border-radius:999px;background:#0e1629;display:grid;place-items:center;cursor:pointer;border:1px solid var(--line)}
.ico:hover{border-color:var(--ring)}
.ico.red{background:#2a0b0b; color:#fecaca; border-color:#7f1d1d}
.ico.yellow{background:#2a210b; color:#fde68a; border-color:#854d0e}
.badge1{position:absolute; transform:translate(12px,-12px); background:#ef4444; color:white; font-size:10px; padding:2px 5px; border-radius:999px}

/* painel direito */
.right{
  width:480px; max-width:48vw; min-width:360px;
  border-left:1px solid var(--line); background:#0b1322; display:flex; flex-direction:column; min-height:0
}
.tabs{display:flex; gap:8px; padding:10px; border-bottom:1px solid var(--line)}
.tab{padding:8px 12px; border-radius:8px; background:#0e1629; color:#cbd5e1; cursor:pointer}
.tab.active{background:#0b213d; color:#93c5fd; border:1px solid #1e3a8a}
.pane{flex:1; overflow:auto; padding:12px}

/* chat */
.msgs{display:flex;flex-direction:column;gap:8px}
.bubble{max-width:70%; padding:10px 12px; border-radius:12px; background:#111827}
.bubble.me{margin-left:auto;background:#1d4ed8;color:white}
.chatin{display:flex; gap:8px; margin-top:10px}
.text{flex:1; padding:10px 12px; background:#0e1629; border:1px solid var(--line); border-radius:10px; color:var(--ink)}
.send{padding:0 14px}

/* atendimento (form) */
.form .row{margin-bottom:12px}
.label{font-size:12px; color:var(--muted); margin-bottom:6px}
.input, .textarea, .select{
  width:100%; padding:10px 12px; background:#0e1629; border:1px solid var(--line); border-radius:10px; color:var(--ink)
}
.textarea{min-height:80px; resize:vertical}
.req::after{content:" *"; color:#f87171}
.segment{display:flex; gap:8px; margin-bottom:10px}
.segtab{flex:1; padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:#0e1629; text-align:center; cursor:pointer}
.segtab.active{background:#0b213d; border-color:#1e40af; color:#93c5fd}
.switch{display:flex; align-items:center; gap:10px; margin:6px 0}
.sw{width:42px;height:22px;background:#0e1629;border:1px solid var(--line);border-radius:999px;position:relative;cursor:pointer}
.sw::after{content:"";position:absolute;top:2px;left:2px;width:18px;height:18px;border-radius:999px;background:#374151;transition:.15s}
.sw.on{background:#052e16;border-color:#14532d}
.sw.on::after{left:22px;background:#22c55e}
.actions{display:flex; gap:10px; margin-top:10px}

/* exames */
.card{background:#0e1629;border:1px solid var(--line);border-radius:10px;padding:12px}
.list{display:grid; gap:8px}
.add{background:#0b213d;border:1px solid #1e40af;color:#bfdbfe;padding:10px;border-radius:10px;cursor:pointer}
.empty{border:1px dashed var(--line); border-radius:10px; display:grid; place-items:center; padding:24px; color:var(--muted)}

/* receitas (Memed) */
.rxHead{display:flex; align-items:center; justify-content:space-between; gap:10px}
.rxBtn{background:#1d4ed8;color:white;border:none;padding:10px 14px;border-radius:10px;cursor:pointer}
.rxItem{background:#0e1629;border:1px solid var(--line);border-radius:10px;padding:10px 12px}
.kicker{font-size:12px;color:var(--muted)}

/* Dr.AI painel */
#aipanel{
  position:fixed; right:16px; bottom:16px; width:360px; max-width:90vw;
  background:#0b1322; border:1px solid var(--line); border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.35); display:none; flex-direction:column; z-index:50
}
.ahead{display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid var(--line)}
.acontent{padding:12px; max-height:45vh; overflow:auto; display:flex; flex-direction:column; gap:8px}
.afoot{display:flex; gap:8px; padding:12px; border-top:1px solid var(--line)}
.disclaimer{font-size:12px;color:#a3a3a3; padding:0 12px 8px}
.small{font-size:12px;color:var(--muted)}
.hidden{display:none}

/* util */
hr.sep{border:none;border-top:1px solid var(--line);margin:10px 0}

/* ======= LAYOUT 2 COLUNAS (vídeo | notas) ======= */
#tmLayout, .tm-layout, .enhanced-grid, .enhanced-split, .split-container {
  display: flex;
  align-items: stretch;
  gap: 16px;
}

/* Área de vídeo (esquerda, expansível) */
.tm-video, .video-area, .stage, [data-panel="stage"], #leftPane {
  flex: 1 1 auto;
  min-width: 0;             /* IMPORTANTÍSSIMO pra flex encolher sem quebrar */
  position: relative;       /* para ancorar controles */
}

/* Painel lateral (direita, largura fixa/persistente) */
[data-panel="side"], .side-panel, .consult-panel, .right-panel, .left-panel, #rightPane {
  position: relative;
  overflow: visible;        /* o handle precisa sair da borda */
  flex: 0 0 var(--notes-w, 480px);
  width: var(--notes-w, 480px);
  min-width: 320px;
  max-width: 720px;
}

/* ======= HANDLE DO RESIZER ======= */
#tmResizer{
  position:absolute;
  top:0; height:100%;
  width:8px; z-index:40;
  cursor: col-resize;
  background: linear-gradient(to right,
    rgba(255,255,255,0) 0,
    rgba(255,255,255,.10) 50%,
    rgba(255,255,255,0) 100%);
  opacity:.6;
}
#tmResizer:hover{ opacity:1; }

/* ======= CONTROLES DO VÍDEO (por cima) ======= */
.video-controls, [data-controls="video"], .controls, .controls-bar, .toolbar, .video-toolbar {
  position: absolute !important;
  left: 50% !important;
  bottom: 16px !important;
  transform: translateX(-50%) !important;
  z-index: 60 !important;
  pointer-events: auto !important;
  opacity: 1 !important;
}

/* Evita o painel atravessar a área do vídeo */
.tm-video *, #leftPane * { max-width: 100%; }

#patientBanner {
  position: absolute;
  left: 12px;
  top: 12px;
  display: flex;
  gap: 10px;
  align-items: center;
  padding: 10px 12px;
  border-radius: 12px;
  color: #fff;
  background: rgba(17,24,39,.6);        /* slate-900/60 */
  backdrop-filter: blur(6px);
  border: 1px solid rgba(255,255,255,.08);
  z-index: 30;
}
#patientBanner .name { font-weight: 700; }
#patientBanner .meta { opacity: .9; font-size: 12px; }
#patientBanner button {
  background: #16a34a; /* verde */
  border: none;
  color: #fff;
  padding: 6px 10px;
  border-radius: 10px;
  cursor: pointer;
}
#patientBanner button:hover { filter: brightness(1.1); }

/* --- Patient banner overlay --- */
.patient-banner{
  position:absolute; inset:12px 12px auto 12px;
  display:flex; justify-content:space-between; align-items:center; gap:16px;
  padding:10px 12px; border-radius:12px;
  color:#E8F0FF; z-index:50;
  background:linear-gradient(90deg,rgba(7,13,28,.66),rgba(7,13,28,.42));
  border:1px solid rgba(162,210,255,.25);
  backdrop-filter: blur(6px);
  box-shadow: 0 6px 18px rgba(0,0,0,.25);
  pointer-events:auto;
}
.patient-banner .pb-left{display:flex;align-items:center;gap:12px;min-width:0}
.patient-banner .avatar{
  width:34px;height:34px;border-radius:10px;
  display:grid;place-items:center;background:#A2D2FF;color:#0F172A;font-weight:700;
}
.patient-banner .name{font-weight:700;letter-spacing:.1px}
.patient-banner .meta{opacity:.85;font-size:12px;white-space:nowrap}
.patient-banner .badge{
  background:rgba(162,210,255,.18);border:1px solid rgba(162,210,255,.4);
  color:#DCEBFF;border-radius:999px;padding:2px 8px;margin-right:6px
}
.patient-banner .sep{opacity:.5;margin:0 6px}
.patient-banner .pb-right{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.patient-banner .status-dot{
  width:10px;height:10px;border-radius:999px;display:inline-block;
  background: #22c55e; box-shadow:0 0 0 3px rgba(34,197,94,.18)
}
.patient-banner .status-dot.off{background:#ef4444; box-shadow:0 0 0 3px rgba(239,68,68,.18)}
.patient-banner .timer{font-variant-numeric:tabular-nums;opacity:.9;padding:0 4px}
.patient-banner .btn{
  display:inline-flex;align-items:center;gap:6px;
  padding:8px 12px;border-radius:10px;border:1px solid rgba(162,210,255,.32);
  background:rgba(12,18,32,.35); color:#E8F0FF; cursor:pointer; font-weight:600
}
.patient-banner .btn:hover{background:rgba(162,210,255,.12)}
.patient-banner .btn.pill{border-radius:999px;background:rgba(162,210,255,.15)}
.patient-banner .btn.start{background:#14a34a;border-color:#14a34a}
.patient-banner .btn.lite{background:transparent}
.patient-banner .btn.lite:hover{background:rgba(255,255,255,.06)}
@media (max-width: 980px){
  .patient-banner{inset:8px 8px auto 8px; gap:10px; padding:8px}
  .patient-banner .btn.lite{display:none} /* enxuga nos menores */
}

/* --- Split redimensionável --- */
:root{
  --notes-min: 360px;
  --notes-max: 760px;
  --notes-default: 420px;
}
.enh-split{
  display:grid;
  grid-template-columns: 1fr 8px minmax(var(--notes-min), 36%);
  gap:0; height: calc(100vh - 80px); /* ajuste se seu topo for maior/menor */
}
.split-left, .split-right{min-width:0; min-height:0; overflow:auto}
.split-right{background:rgba(255,255,255,.02); min-width:var(--notes-min);}
.notes-panel{min-width: var(--notes-min);}
.split-divider{
  cursor:col-resize; position:relative; 
  background:rgba(255,255,255,.06); 
  border-left:1px solid rgba(255,255,255,.12);
  width: 8px;
}
.split-divider:hover{background:rgba(255,255,255,.12);}
.split-divider .grip{
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  width:3px; height:36px; border-radius:2px; background:rgba(162,210,255,.35)
}
.split-divider.drag{background:#0f172a}
@media (max-width: 980px){
  .enh-split{grid-template-columns:1fr}
  .split-divider, .split-right{display:none} /* mobile: vira 1 coluna */
}
</style>
</head>
<body data-consult-id="demo-123">
<div class="app">
  <!-- SPLIT layout -->
  <div class="enh-split" data-split="enhanced" id="splitRoot">
    <section id="leftPane" class="split-left" style="position:relative">
      <!-- === Patient Banner / Faixa sobre o vídeo === -->
      <div class="patient-banner" id="patientBanner" aria-live="polite">
        <div class="pb-left">
          <div class="avatar" id="pbAvatar">CF</div>
          <div class="id">
            <div class="name" id="pbName">Ana Costa Silva</div>
            <div class="meta">
              <span class="badge">Particular</span>
              <span class="sep">•</span>
              <span class="phone" id="pbPhone">11 98765-4321</span>
              <span class="sep">•</span>
              <span class="age" id="pbAge">0 anos</span>
            </div>
          </div>
          <button class="btn pill" id="btnInvite">Convite</button>
        </div>

        <div class="pb-right">
          <span class="status-dot on" id="pbStatusDot" aria-hidden="true"></span>
          <span class="status-label" id="statusLabel">Aguardando</span>
          <span class="timer" id="pbTimer">00:00</span>

          <button class="btn start" id="btnStart">▶ Iniciar Consulta</button>
          <button class="btn lite"  id="btnBack">Voltar</button>
          <button class="btn lite"  id="btnForm">Formulário</button>
          <button class="btn lite"  id="btnLeave">Sair</button>
        </div>
      </div>

      <!-- VÍDEO PRINCIPAL -->
      <div class="clock" id="clock">00:00</div>
      <div class="wait">
        <div>
          <div class="cam">📷</div>
          <div style="text-align:center;margin-top:8px;color:#9ca3af">Aguardando paciente…</div>
          <div class="room">
            <span class="badgeOn"><span style="width:8px;height:8px;border-radius:999px;background:#22c55e"></span>Conectado</span>
            <div style="margin-top:6px;color:#9ca3af">Sala: #ABC123</div>
          </div>
        </div>
      </div>

      <!-- barra inferior -->
      <div class="toolbar">
        <div class="ico" title="Anexar (arquivo)"><input id="fileup" type="file" multiple class="hidden"><span>📎</span></div>
        <div class="ico" id="btnShot" title="Captura de tela"><span>📷</span></div>
        <div class="ico" id="btnOpenChat" title="Abrir Chat"><span>💬</span></div>
        <div class="ico" id="btnBell" title="Notificações"><span>🔔</span><span class="badge1" id="bellN" style="display:none">1</span></div>
        <div class="ico" id="btnAI" title="Dr. AI (orientação)"><span>🧠</span></div>
        <div class="ico" id="btnMic" title="Mic on/off"><span>🎙️</span></div>
        <div class="ico" id="btnCam" title="Vídeo on/off"><span>🎥</span></div>
        <div class="ico yellow" id="btnHold" title="Enviar p/ sala de espera"><span>⏸️</span></div>
        <div class="ico red" id="btnEnd" title="Encerrar"><span>⛔</span></div>
      </div>
    </section>

    <!-- divisor arrastável -->
    <div id="divider" class="split-divider" role="separator"
         aria-orientation="vertical" aria-label="Redimensionar painel de anotações"
         tabindex="0">
      <span class="grip" aria-hidden="true"></span>
    </div>

    <aside id="rightPane" class="split-right">

      <!-- abas -->
      <div class="tabs">
        <div class="tab" data-tab="chat">💬 Chat</div>
        <div class="tab active" data-tab="care">🩺 Atendimento</div>
        <div class="tab" data-tab="exams">🧪 Exames</div>
        <div class="tab" data-tab="rx">💊 Receitas</div>
        <button onclick="window.telemedEnhancedDebug?.resetLayout()" 
                title="Redefinir layout dos painéis" 
                style="margin-left:auto;padding:4px 8px;font-size:11px;border-radius:6px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.12);color:#fff;cursor:pointer;">
          Reset UI
        </button>
      </div>

      <!-- panes -->
      <div class="pane" id="pane-chat" style="display:none">
        <div class="msgs" id="msgs">
          <div class="bubble">Olá, doutor! Como está?</div>
          <div class="bubble me">Olá! Estou bem, obrigado. Como posso ajudá-lo hoje?</div>
          <div class="bubble">Sinto dores de cabeça frequentes…</div>
        </div>
        <div class="chatin">
          <input id="msg" class="text" placeholder="Digite sua mensagem…"/>
          <button class="btn send" id="send">Enviar</button>
        </div>
      </div>

      <div class="pane form" id="pane-care">
        <div class="row">
          <div class="label req">Queixa Principal</div>
          <textarea id="field-qp" class="textarea" placeholder="Motivo da consulta"></textarea>
        </div>
        <div class="row">
          <div class="label req">História da Doença Atual</div>
          <textarea id="field-hda" class="textarea" placeholder="Evolução dos sintomas"></textarea>
        </div>

        <div class="row">
          <div class="label req">Hipótese Diagnóstica / CID-10</div>
          <input id="cidInput" class="input" list="cidlist" placeholder="Digite CID">
          <datalist id="cidlist"></datalist>
        </div>

        <div class="segment">
          <div class="segtab active" data-seg="cond">Conduta</div>
          <div class="segtab" data-seg="exams">Exames</div>
          <div class="segtab" data-seg="memed">MedMed</div>
        </div>

        <div id="seg-cond">
          <div class="row">
            <div class="label req">Conduta Terapêutica</div>
            <textarea id="field-cond" class="textarea" placeholder="Orientações e tratamento"></textarea>
          </div>
          <div class="row">
            <div class="label">Complexidade</div>
            <div class="switch"><div class="sw" id="sw-grave"></div> Agravo em saúde mental</div>
            <div class="switch"><div class="sw" id="sw-compl"></div> Complexidade clínica</div>
            <div class="switch"><div class="sw" id="sw-inc"></div> Inconsistência de queixas</div>
          </div>
          <div class="row">
            <div class="label">Sinais de Alerta</div>
            <input id="field-alert" class="input" placeholder="Ex: ideação suicida, dor torácica…">
          </div>
          <div class="actions">
            <button class="btn blue" id="btnSave">💾 Salvar Atendimento</button>
            <button class="btn red" id="btnFinish">✔ Finalizar Consulta</button>
          </div>
        </div>

        <div id="seg-exams" class="hidden">
          <div class="card">
            <div class="label">Templates Comuns</div>
            <div class="list" id="tplList">
              <div class="rxItem" data-name="Hemograma completo" data-rotina="Jejum de 8–12 horas">Hemograma completo <div class="kicker">Jejum de 8–12 horas</div></div>
              <div class="rxItem" data-name="Glicemia de jejum" data-rotina="Jejum rigoroso de 8–12 horas">Glicemia de jejum <div class="kicker">Jejum rigoroso de 8–12 horas</div></div>
            </div>
          </div>
          <div class="row"><div class="label">Nome do exame</div><input id="ex-name" class="input"></div>
          <div class="row"><div class="label">Rotina</div>
            <select id="ex-prio" class="select">
              <option>Rotina</option><option>Prioritário</option><option>Urgente</option>
            </select>
          </div>
          <div class="row"><div class="label">Instruções específicas</div><textarea id="ex-notes" class="textarea"></textarea></div>
          <button class="add" id="addExam">+ Adicionar Exame</button>
          <div class="row">
            <div class="label">Solicitações</div>
            <div id="examList" class="empty">Nenhum exame solicitado</div>
          </div>
        </div>

        <div id="seg-memed" class="hidden">
          <div class="card">
            <div class="rxHead">
              <div>
                <div style="font-weight:600">Integração MedMed</div>
                <div class="kicker">Base farmacológica, assinatura digital ICP-Brasil, verificação de interações.</div>
              </div>
              <button class="rxBtn" id="openMemed">Nova Receita MedMed</button>
            </div>
          </div>
          <div class="row">
            <div class="label">Receitas do Atendimento</div>
            <div id="rxList" class="empty">Nenhuma receita ainda</div>
          </div>
        </div>
      </div>

      <div class="pane" id="pane-exams" style="display:none">
        <div class="card">
          <div class="label">Atalho</div>
          <div class="kicker">Use a aba "Atendimento → MedMed" para prescrever.</div>
        </div>
      </div>

      <div class="pane" id="pane-rx" style="display:none">
        <div class="card">
          <div class="rxHead">
            <div>
              <div style="font-weight:600">Integração MedMed</div>
              <div class="kicker">Clique abaixo para abrir a prescrição em nova aba.</div>
            </div>
            <button class="rxBtn" id="openMemed2">Nova Receita MedMed</button>
          </div>
        </div>
        <div class="row"><div class="label">Receitas do Atendimento</div><div id="rxList2" class="empty">Nenhuma receita ainda</div></div>
      </div>
    </section>
  </div>
</div>

<!-- Painel Dr.AI -->
<div id="aipanel">
  <div class="ahead"><div>🧠 <b>Dr. AI</b></div><button class="btn red" id="aiClose">Fechar</button></div>
  <div class="disclaimer">As respostas são apoio à decisão e <b>não substituem</b> o julgamento clínico.</div>
  <div class="acontent" id="aiMsgs">
    <div class="bubble">Como posso ajudar?</div>
  </div>
  <div class="afoot">
    <input id="aiText" class="text" placeholder="Digite sua pergunta clínica…">
    <button class="btn blue" id="aiSend">Enviar</button>
  </div>
</div>

<script>
/* ===== Minimal inline script - most functionality moved to enhanced-ux.js ===== */
// Simple clock timer only - everything else delegated to external scripts
let secs = 0;
setInterval(()=>{ 
  secs++; 
  const m=String(Math.floor(secs/60)).padStart(2,'0'); 
  const s=String(secs%60).padStart(2,'0'); 
  const clockEl = document.querySelector('#clock');
  if(clockEl) clockEl.textContent = `${m}:${s}`;
}, 1000);

// Tab functionality moved to enhanced-ux.js

// Segment functionality moved to enhanced-ux.js

// Switches functionality moved to enhanced-ux.js

/* ===== CID10 autosuggest ===== */
const localCid = [
  "F41.1 – Transtorno de ansiedade generalizada",
  "G43.0 – Enxaqueca sem aura",
  "J00 – Nasofaringite aguda (resfriado)",
  "I10 – Hipertensão essencial (primária)",
  "E11 – Diabetes mellitus tipo 2"
];
async function loadCid(q){
  try{
    const r = await fetch(`/api/cid10?q=${encodeURIComponent(q)}`);
    if(!r.ok) throw 0;
    const list = await r.json();
    return list.length? list : localCid.filter(x => x.toLowerCase().includes(q.toLowerCase()));
  }catch{ return localCid.filter(x => x.toLowerCase().includes(q.toLowerCase())); }
}
// CID input functionality moved to enhanced-ux.js

// Exams functionality moved to enhanced-ux.js

// MedMed functionality moved to enhanced-ux.js

// Chat functionality moved to enhanced-ux.js

// Dr.AI functionality moved to enhanced-ux.js

// Button functionality moved to enhanced-ux.js

// Video toolbar functionality moved to enhanced-ux.js
</script>

<!-- Analytics e UX modules com cache-buster -->
<script defer src="/js/telemed-analytics.js?v=1"></script>
<script defer src="/js/enhanced-ux.js?v=5"></script>
<!-- Scripts removed - functionality moved to enhanced-ux.js -->

<!-- Analytics integration moved to enhanced-ux.js -->
<!-- SVG ICON SPRITE (global) -->
<svg xmlns="http://www.w3.org/2000/svg" style="position:absolute;width:0;height:0;overflow:hidden" aria-hidden="true">
  <symbol id="i-clip" viewBox="0 0 24 24"><path fill="currentColor" d="M16.5 6.5L8.88 14.12a3 3 0 1 0 4.24 4.24l7.07-7.07a5 5 0 1 0-7.07-7.07L4.7 8.57a7 7 0 1 0 9.9 9.9l5.66-5.66"/></symbol>
  <symbol id="i-camera" viewBox="0 0 24 24"><path fill="currentColor" d="M9 3l1.5 2H18a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2.5L10 3h-1zM12 9a5 5 0 1 0 0 10a5 5 0 0 0 0-10"/></symbol>
  <symbol id="i-chat" viewBox="0 0 24 24"><path fill="currentColor" d="M20 2H4a2 2 0 0 0-2 2v14l4-4h14a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2"/></symbol>
  <symbol id="i-bell" viewBox="0 0 24 24"><path fill="currentColor" d="M12 22a2 2 0 0 0 2-2H10a2 2 0 0 0 2 2m6-6V11a6 6 0 0 0-5-5.91V4a1 1 0 1 0-2 0v1.09A6 6 0 0 0 6 11v5L4 18v1h16v-1z"/></symbol>
  <symbol id="i-brain" viewBox="0 0 24 24"><path fill="currentColor" d="M10 2a3 3 0 0 0-3 3v.17A3 3 0 0 0 3 8v2a3 3 0 0 0 2 2.82V14a4 4 0 0 0 4 4h1V4a2 2 0 0 0-2-2m4 0a2 2 0 0 0-2 2v14h1a4 4 0 0 0 4-4v-1.18A3 3 0 0 0 21 10V8a3 3 0 0 0-4-2.83V5a3 3 0 0 0-3-3"/></symbol>
  <symbol id="i-mic" viewBox="0 0 24 24"><path fill="currentColor" d="M12 14a3 3 0 0 0 3-3V5a3 3 0 1 0-6 0v6a3 3 0 0 0 3 3m5-3a5 5 0 0 1-10 0H5a7 7 0 0 0 6 6.92V21H9v2h6v-2h-2v-3.08A7 7 0 0 0 19 11z"/></symbol>
  <symbol id="i-mic-off" viewBox="0 0 24 24"><path fill="currentColor" d="M19 11h-2a5 5 0 0 1-7.58 4.26l1.46-1.46A3 3 0 0 0 15 11V9h2v2a7 7 0 0 1-2 5l1.41 1.41A8.96 8.96 0 0 0 20 11M3.28 2.22L2 3.5l6.5 6.5V11a3 3 0 0 0 3 3c.15 0 .3-.01.44-.04l1.61 1.61A5 5 0 0 1 8 11V9.5L3.28 2.22M12 2a3 3 0 0 0-3 3v1.18L11.82 9H15V5a3 3 0 0 0-3-3m-1 18v3h2v-3h-2Z"/></symbol>
  <symbol id="i-cam" viewBox="0 0 24 24"><path fill="currentColor" d="M17 10.5V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-3.5l5 5V5.5l-5 5Z"/></symbol>
  <symbol id="i-pause" viewBox="0 0 24 24"><path fill="currentColor" d="M6 4h4v16H6V4m8 0h4v16h-4V4"/></symbol>
  <symbol id="i-stop" viewBox="0 0 24 24"><path fill="currentColor" d="M6 6h12v12H6z"/></symbol>
</svg>

</body>
</html>