<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TeleMed – Dashboard v2</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    :root{
      --bg:#F6F8FB;
      --text:#1F2937;
      --muted:#6B7280;
      --card-bg:#FFFFFF;
      --shadow:0px 2px 8px rgba(0,0,0,0.05);
      --radius:12px;
      --pad:24px;
      --primary:#A2D2FF; /* azul pastel */
      --primary-600:#8AB8E6; /* hover */
      --lavender:#CDB4DB; /* lavanda */
      --mint:#BDE0FE; /* tom claro de apoio */
      --success:#22C55E;
      --danger:#EF4444;
      --warning:#F59E0B;
      --border:1px solid rgba(0,0,0,0.06);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color:var(--text);
      background:linear-gradient(180deg, #F9FBFF 0%, var(--bg) 100%);
    }

    .icon{width:18px !important;height:18px !important;flex:0 0 18px;display:inline-block}

    /* Sidebar */
    .sidebar{
      position:fixed; inset:0 auto 0 0; width:272px; background:#ffffff; box-shadow:var(--shadow);
      border-right:var(--border); padding:20px; display:flex; flex-direction:column; gap:16px;
    }
    .brand{display:flex; align-items:center; gap:10px; font-weight:700; font-size:18px}
    .brand .logo{width:34px;height:34px; display:grid; place-items:center; border-radius:10px; background:var(--primary); color:#0F172A; font-weight:700}
    .sidebar .section-title{font-size:12px; text-transform:uppercase; letter-spacing:.08em; color:var(--muted); margin:8px 0 4px}
    .nav{display:flex; flex-direction:column; gap:6px}
    .nav a{
      display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:10px; text-decoration:none; color:var(--text);
      transition:transform .15s ease, background .15s ease, opacity .15s ease;
    }
    .nav a:hover{background:rgba(162,210,255,.18); opacity:.9}
    .nav a.active{background:rgba(162,210,255,.25); border:1px solid rgba(162,210,255,.6)}
    .nav .icon{opacity:.9}

    /* Main */
    main{margin-left:272px; padding:32px; display:flex; flex-direction:column; gap:24px}

    .topbar{display:flex; align-items:center; gap:16px; flex-wrap:wrap}
    .search{flex:1; min-width:260px; display:flex; align-items:center; gap:10px; background:#fff; border-radius:12px; padding:10px 14px; box-shadow:var(--shadow); border:var(--border)}
    .search input{border:none; outline:none; width:100%; font-size:14px}
    .chip{background:#fff; padding:8px 12px; border-radius:999px; box-shadow:var(--shadow); border:var(--border); font-size:13px; color:#374151}

    .kpis{display:grid; grid-template-columns:repeat(4, minmax(220px,1fr)); gap:24px}
    .card{background:var(--card-bg); border-radius:var(--radius); box-shadow:var(--shadow); padding:var(--pad); transition:transform .16s ease, box-shadow .16s ease, opacity .16s ease}
    .card:hover{transform:translateY(-2px); opacity:.98}
    .kpi-title{font-size:13px; color:var(--muted); margin:0 0 8px}
    .kpi-value{font-size:32px; font-weight:700; letter-spacing:-0.02em; display:flex; align-items:baseline; gap:10px}
    .delta{font-size:12px; padding:4px 8px; border-radius:999px; background:rgba(162,210,255,.22); border:1px solid rgba(162,210,255,.5)}
    .delta.up{background:rgba(34,197,94,.12); border-color:rgba(34,197,94,.4); color:#15803D}
    .delta.down{background:rgba(239,68,68,.10); border-color:rgba(239,68,68,.36); color:#B91C1C}

    .spark{height:44px; margin-top:8px}

    .grid-2{display:grid; grid-template-columns:2fr 1.1fr; gap:24px}
    .grid-3{display:grid; grid-template-columns:1.3fr 1fr 1fr; gap:24px}

    /* Buttons */
    .btn{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:12px; border:1px solid transparent; cursor:pointer; font-weight:600; transition:opacity .15s ease, transform .15s ease}
    .btn:focus{outline:3px solid rgba(162,210,255,.35)}
    .btn:hover{opacity:.8}
    .btn.primary{background:var(--primary); border-color:var(--primary);}
    .btn.primary:hover{background:var(--primary-600)}
    .btn.secondary{background:transparent; border:1px solid var(--primary); color:#0F172A}

    .quick-actions{display:flex; gap:12px; flex-wrap:wrap}

    /* Charts */
    .chart{height:320px}

    /* Heatmap */
    .heatmap{display:grid; grid-template-columns:repeat(24, minmax(10px,1fr)); gap:4px}
    .hm-cell{width:100%; aspect-ratio:1/1; border-radius:6px; background:#EFF6FF; border:1px solid rgba(162,210,255,.25);}
    .hm-legend{display:flex; align-items:center; gap:8px; color:var(--muted); font-size:12px}
    .hm-swatch{width:16px; height:16px; border-radius:4px; background:rgba(162,210,255,.25); border:1px solid rgba(162,210,255,.45)}

    /* Timeline */
    .timeline{position:relative; padding-left:22px; margin:0; list-style:none}
    .timeline::before{content:""; position:absolute; left:8px; top:0; bottom:0; width:2px; background:linear-gradient(#E5E7EB,#D1D5DB)}
    .timeline li{position:relative; padding:10px 0}
    .timeline li::marker{content:""}
    .timeline li .dot{position:absolute; left:2px; top:16px; width:12px; height:12px; border-radius:999px; background:var(--primary); box-shadow:0 0 0 3px rgba(162,210,255,.25)}
    .timeline li .item{background:#fff; border-radius:10px; box-shadow:var(--shadow); border:var(--border); padding:12px 14px}
    .timeline .meta{color:var(--muted); font-size:12px}

    /* Responsive */
    @media (max-width:1200px){
      .kpis{grid-template-columns:repeat(2, minmax(220px,1fr))}
      .grid-2{grid-template-columns:1fr}
      .grid-3{grid-template-columns:1fr}
      .chart{height:260px}
    }
    @media (max-width:760px){
      .sidebar{position:static; width:auto; border-right:none}
      main{margin:0; padding:18px}
    }
  </style>
</head>
<body>
  <aside class="sidebar">
    <div class="brand"><div class="logo">TM</div> TeleMed</div>
    <div class="section-title">Menu</div>
    <nav class="nav">
      <a class="active" href="#"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 12l9-9 9 9"/><path d="M9 21V9h6v12"/></svg> Dashboard</a>
      <a href="#"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="8" cy="8" r="3"/><circle cx="16" cy="8" r="3"/><path d="M3 21v-1a5 5 0 015-5h0a5 5 0 015 5v1"/><path d="M12 21v-1a5 5 0 015-5h0a5 5 0 015 5v1"/></svg> Pacientes</a>
      <a href="https://84622708-9db0-420a-a1f1-6a7a55403590-00-2d2fgen7wjybm.picard.replit.dev/agenda"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 12c2.2 0 4-1.8 4-4S14.2 4 12 4 8 5.8 8 8s1.8 4 4 4z"/><path d="M20 20a8 8 0 10-16 0"/></svg> Médicos</a>
      <a href="#analytics"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M4 19V5"/><path d="M10 19V9"/><path d="M16 19V13"/><path d="M22 19V3"/></svg> Analytics</a>
      <a href="#prontuario"><svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M4 6h12"/><path d="M4 12h12"/><path d="M4 18h12"/><path d="M18 6h2v12h-2"/></svg> Prontuário</a>
      <div class="section-title">Ações Rápidas</div>
      <div class="quick-actions">
        <button class="btn primary">Nova Consulta</button>
        <button class="btn secondary">Novo Paciente</button>
        <button class="btn secondary">Teleconsulta</button>
        <button class="btn secondary">Prescrição</button>
      </div>
    </nav>
  </aside>

  <main>
    <!-- Topbar / filtros -->
    <div class="topbar">
      <div class="search">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="11" cy="11" r="7"/><path d="M21 21l-4.35-4.35"/></svg>
        <input placeholder="Buscar por pacientes, exames, sintomas…" />
      </div>
      <span class="chip">Período: Este ano</span>
      <span class="chip">Departamento: Todos</span>
      <span class="chip">Convênio: Todos</span>
    </div>

    <!-- KPI Cards  -->
    <section class="kpis">
      <div class="card">
        <h4 class="kpi-title">Pacientes Cadastrados</h4>
        <div class="kpi-value">847 <span class="delta up">+3% vs. semana passada</span></div>
        <canvas id="spk1" class="spark" aria-label="tendência de pacientes"></canvas>
      </div>
      <div class="card">
        <h4 class="kpi-title">Consultas Hoje</h4>
        <div class="kpi-value">12 <span class="delta down">-7% vs. ontem</span></div>
        <canvas id="spk2" class="spark" aria-label="tendência de consultas"></canvas>
      </div>
      <div class="card">
        <h4 class="kpi-title">Prescrições Pendentes</h4>
        <div class="kpi-value">5 <span class="delta">meta: ≤ 4</span></div>
        <canvas id="spk3" class="spark" aria-label="tendência de prescrições"></canvas>
      </div>
      <div class="card">
        <h4 class="kpi-title">Avaliação Média</h4>
        <div class="kpi-value">4.0 <span class="delta up">+0.2 vs. mês anterior</span></div>
        <canvas id="spk4" class="spark" aria-label="tendência de NPS"></canvas>
      </div>
    </section>

    <!-- Analytics: barras horizontais e heatmap -->
    <section id="analytics" class="grid-2">
      <div class="card">
        <h3 style="margin:0 0 8px">Atendimentos por Hora</h3>
        <p class="meta" style="margin:0 0 16px; color:var(--muted)">Distribuição de atendimentos ao longo do dia</p>
        <canvas id="barHoras" class="chart" aria-label="gráfico de barras horizontais"></canvas>
      </div>
      <div class="card">
        <h3 style="margin:0 0 8px">Horários de Pico (Heatmap)</h3>
        <p class="meta" style="margin:0 0 16px; color:var(--muted)">Intensidade por dia x hora</p>
        <div class="heatmap" id="heatmap"></div>
        <div class="hm-legend" style="margin-top:12px">
          <span>Baixa</span>
          <span class="hm-swatch" style="background:rgba(162,210,255,.18)"></span>
          <span class="hm-swatch" style="background:rgba(162,210,255,.35)"></span>
          <span class="hm-swatch" style="background:rgba(162,210,255,.55)"></span>
          <span class="hm-swatch" style="background:rgba(162,210,255,.75)"></span>
          <span>Alta</span>
        </div>
      </div>
    </section>

    <!-- Prontuário & Atividade -->
    <section id="prontuario" class="grid-3">
      <div class="card">
        <h3 style="margin:0 0 8px">Timeline do Prontuário</h3>
        <p class="meta" style="margin:0 16px 8px 0; color:var(--muted)">Eventos clínicos recentes</p>
        <ul class="timeline">
          <li><span class="dot"></span><div class="item"><strong>Consulta concluída</strong> – João Santos<br><span class="meta">Hoje • 14:20</span></div></li>
          <li><span class="dot"></span><div class="item"><strong>Prescrição enviada</strong> – Amoxil 500mg<br><span class="meta">Hoje • 13:55</span></div></li>
          <li><span class="dot"></span><div class="item"><strong>Exame recebido</strong> – Hemograma (PDF)<br><span class="meta">Ontem • 18:10</span></div></li>
          <li><span class="dot"></span><div class="item"><strong>Anotação clínica</strong> – Dor torácica leve<br><span class="meta">Ontem • 10:42</span></div></li>
        </ul>
      </div>

      <div class="card">
        <h3 style="margin:0 0 8px">Satisfação do Paciente</h3>
        <p class="meta" style="margin:0 0 16px; color:var(--muted)">NPS por semana</p>
        <canvas id="lineNps" class="chart" aria-label="linha de NPS"></canvas>
      </div>

      <div class="card">
        <h3 style="margin:0 0 8px">Fila por Prioridade</h3>
        <p class="meta" style="margin:0 0 16px; color:var(--muted)">Barras finas, horizontais</p>
        <canvas id="barFila" class="chart" aria-label="fila por prioridade"></canvas>
      </div>
    </section>

    <section class="card">
      <div class="quick-actions">
        <button class="btn primary">Agendar Consulta</button>
        <button class="btn secondary">Ver Relatórios</button>
        <button class="btn secondary">Importar Exames</button>
        <button class="btn secondary">Abrir Teleconsulta</button>
      </div>
    </section>

  </main>

<script>
  // Utilidades
  const pastel = (alpha=0.6) => `rgba(162,210,255,${alpha})`;
  const lavender = (alpha=0.6) => `rgba(205,180,219,${alpha})`;

  function sparkline(el, data, color){
    return new Chart(el, {
      type:'line',
      data:{ labels: data.map((_,i)=>i+1), datasets:[{ data, fill:true, tension:.35, borderColor:color(.9), backgroundColor:color(.28), pointRadius:0, borderWidth:2 }] },
      options:{
        responsive:true, maintainAspectRatio:false,
        plugins:{legend:{display:false}, tooltip:{enabled:false}},
        scales:{x:{display:false}, y:{display:false}}
      }
    })
  }

  // Sparklines para os KPIs
  sparkline(document.getElementById('spk1'), [10,12,11,13,14,15,14,16,18,17,19,21], pastel);
  sparkline(document.getElementById('spk2'), [9,8,10,7,8,6,7,6,7,5,6,5], lavender);
  sparkline(document.getElementById('spk3'), [6,5,6,7,5,6,4,5,5,4,5,5], pastel);
  sparkline(document.getElementById('spk4'), [3.6,3.7,3.8,3.7,3.9,4.0,3.9,4.1,4.0,4.2,4.1,4.0], lavender);

  // Barras horizontais – Atendimentos por Hora
  const horas = Array.from({length:24}, (_,i) => `${String(i).padStart(2,'0')}:00`);
  const valsHoras = [4,6,8,3,2,1,1,2,4,6,10,12,14,16,18,15,13,12,11,10,8,7,6,5];
  new Chart(document.getElementById('barHoras'),{
    type:'bar',
    data:{ labels:horas, datasets:[{ data:valsHoras, backgroundColor: pastel(.7), borderColor:'#8AB8E6', borderWidth:1, borderRadius:8, barThickness:6 }] },
    options:{ indexAxis:'y', plugins:{ legend:{display:false} },
      scales:{
        x:{ grid:{ display:false }, ticks:{ color:'#6B7280' } },
        y:{ grid:{ display:false }, ticks:{ color:'#6B7280', autoSkip:false, maxTicksLimit:24 } }
      }
    }
  });

  // Heatmap simples (CSS grid) – 7 dias x 24 horas
  const heatEl = document.getElementById('heatmap');
  const dias = 7, horasDia=24;
  for(let d=0; d<dias; d++){
    for(let h=0; h<horasDia; h++){
      const v = Math.random(); // 0..1 intensidade
      const cell = document.createElement('div');
      const alpha = 0.18 + v*0.62; // 0.18..0.80
      cell.className='hm-cell';
      cell.style.background = `rgba(162,210,255,${alpha.toFixed(2)})`;
      cell.title = `Dia ${d+1}, ${String(h).padStart(2,'0')}:00 – intensidade ${(v*100|0)}%`;
      heatEl.appendChild(cell);
    }
  }

  // Linha – NPS semanal
  new Chart(document.getElementById('lineNps'),{
    type:'line',
    data:{ labels:['S1','S2','S3','S4','S5','S6','S7','S8'],
      datasets:[{ label:'NPS', data:[72,74,71,75,78,80,79,82], borderColor:pastel(.95), backgroundColor:pastel(.3), borderWidth:2, pointRadius:3, tension:.35, fill:true }] },
    options:{ plugins:{legend:{display:false}}, scales:{ x:{ grid:{display:false}}, y:{ grid:{color:'rgba(0,0,0,0.04)'}, suggestedMin:60, suggestedMax:90 } } }
  });

  // Barras horizontais finas – Fila por prioridade
  new Chart(document.getElementById('barFila'),{
    type:'bar',
    data:{ labels:['Crítica','Alta','Média','Baixa'],
      datasets:[{ data:[8,14,9,5], backgroundColor:[lavender(.75), pastel(.75), pastel(.55), lavender(.45)], borderColor:'#8AB8E6', borderWidth:1, barThickness:6, borderRadius:8 }] },
    options:{ indexAxis:'y', plugins:{legend:{display:false}}, scales:{ x:{grid:{display:false}}, y:{grid:{display:false}} } }
  });
</script>
</body>
</html>