{
  "timestamp": "2025-08-17T11:36:00.806Z",
  "summary": {
    "total_tests": 5,
    "passed": 2,
    "failed": 3,
    "success_rate": "40%",
    "total_duration": "100662ms",
    "status": "SOME_FAILED"
  },
  "test_results": [
    {
      "name": "Contract Tests",
      "status": "FAIL",
      "duration": "286ms",
      "error": "Command failed: node scripts/contract-tests.cjs\nContract failures: [\n  'health',\n  'create_consultation',\n  'list_consultations',\n  'create_exam',\n  'payment_intent'\n]\n",
      "output": "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ (index) â”‚ step                  â”‚ status â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 0       â”‚ 'health'              â”‚ 404    â”‚\nâ”‚ 1       â”‚ 'create_consultation' â”‚ 404    â”‚\nâ”‚ 2       â”‚ 'list_consultations'  â”‚ 404    â”‚\nâ”‚ 3       â”‚ 'create_exam'         â”‚ 404    â”‚\nâ”‚ 4       â”‚ 'payment_intent'      â”‚ 404    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n",
      "stderr": "Contract failures: [\n  'health',\n  'create_consultation',\n  'list_consultations',\n  'create_exam',\n  'payment_intent'\n]\n",
      "description": "ValidaÃ§Ã£o dos contratos mÃ­nimos das APIs (Consultation/ExamOrder/Payment)"
    },
    {
      "name": "Auth Verification",
      "status": "PASS",
      "duration": "82ms",
      "output": "",
      "description": "ValidaÃ§Ã£o da estrutura e campos JWT/OAuth"
    },
    {
      "name": "Accessibility Tests",
      "status": "FAIL",
      "duration": "40551ms",
      "error": "Command failed: node scripts/a11y.cjs\nnpm warn exec The following package was not found and will be installed: pa11y@9.0.0\n\nError: Failed to launch the browser process!\n/home/runner/.cache/puppeteer/chrome/linux-139.0.7258.68/chrome-linux64/chrome: error while loading shared libraries: libglib-2.0.so.0: cannot open shared object file: No such file or directory\n\n\nTROUBLESHOOTING: https://pptr.dev/troubleshooting\n\n    at Interface.onClose (/home/runner/.npm/_npx/05d1b9d3e401eeb8/node_modules/@puppeteer/browsers/lib/cjs/launch.js:325:24)\n    at Interface.emit (node:events:536:35)\n    at Interface.close (node:internal/readline/interface:527:10)\n    at Socket.onend (node:internal/readline/interface:253:10)\n    at Socket.emit (node:events:536:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n\nnode:child_process:966\n    throw err;\n    ^\n\nError: Command failed: npx pa11y \"http://localhost:5000/\" --threshold 5\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at checkExecSyncError (node:child_process:891:11)\n    at execSync (node:child_process:963:15)\n    at Object.<anonymous> (/home/runner/workspace/scripts/a11y.cjs:12:3)\n    at Module._compile (node:internal/modules/cjs/loader:1529:14)\n    at Module._extensions..js (node:internal/modules/cjs/loader:1613:10)\n    at Module.load (node:internal/modules/cjs/loader:1275:32)\n    at Module._load (node:internal/modules/cjs/loader:1096:12)\n    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:164:12) {\n  status: 1,\n  signal: null,\n  output: [ null, null, null ],\n  pid: 4950,\n  stdout: null,\n  stderr: null\n}\n\nNode.js v20.19.3\n",
      "output": "\n== A11y @ /\n\nWelcome to Pa11y\n\n > Running Pa11y on URL http://localhost:5000/\n",
      "stderr": "npm warn exec The following package was not found and will be installed: pa11y@9.0.0\n\nError: Failed to launch the browser process!\n/home/runner/.cache/puppeteer/chrome/linux-139.0.7258.68/chrome-linux64/chrome: error while loading shared libraries: libglib-2.0.so.0: cannot open shared object file: No such file or directory\n\n\nTROUBLESHOOTING: https://pptr.dev/troubleshooting\n\n    at Interface.onClose (/home/runner/.npm/_npx/05d1b9d3e401eeb8/node_modules/@puppeteer/browsers/lib/cjs/launch.js:325:24)\n    at Interface.emit (node:events:536:35)\n    at Interface.close (node:internal/readline/interface:527:10)\n    at Socket.onend (node:internal/readline/interface:253:10)\n    at Socket.emit (node:events:536:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)\n\nnode:child_process:966\n    throw err;\n    ^\n\nError: Command failed: npx pa11y \"http://localhost:5000/\" --threshold 5\n    at genericNodeError (node:internal/errors:984:15)\n    at wrappedFn (node:internal/errors:538:14)\n    at checkExecSyncError (node:child_process:891:11)\n    at execSync (node:child_process:963:15)\n    at Object.<anonymous> (/home/runner/workspace/scripts/a11y.cjs:12:3)\n    at Module._compile (node:internal/modules/cjs/loader:1529:14)\n    at Module._extensions..js (node:internal/modules/cjs/loader:1613:10)\n    at Module.load (node:internal/modules/cjs/loader:1275:32)\n    at Module._load (node:internal/modules/cjs/loader:1096:12)\n    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:164:12) {\n  status: 1,\n  signal: null,\n  output: [ null, null, null ],\n  pid: 4950,\n  stdout: null,\n  stderr: null\n}\n\nNode.js v20.19.3\n",
      "description": "VerificaÃ§Ã£o WCAG 2.1 AA nas pÃ¡ginas crÃ­ticas"
    },
    {
      "name": "Performance Tests",
      "status": "FAIL",
      "duration": "100561ms",
      "error": "spawnSync /bin/sh ETIMEDOUT",
      "output": "ğŸš€ Verificando performance TeleMed...\nâœ…  .lighthouseci/ directory writable\nâœ…  Configuration file found\nâœ…  Chrome installation found\nâš ï¸   GitHub token not set\nHealthcheck passed!\n\nRunning Lighthouse 3 time(s) on http://localhost:5173/\nRun #1...done.\nRun #2...",
      "stderr": "npm warn exec The following package was not found and will be installed: @lhci/cli@0.15.1\nnpm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported\nnpm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.\nnpm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported\nnpm warn deprecated rimraf@2.7.1: Rimraf versions prior to v4 are no longer supported\n",
      "description": "ValidaÃ§Ã£o do budget de performance (Lighthouse â‰¥80)"
    },
    {
      "name": "Fusion Checklist",
      "status": "PASS",
      "duration": "99ms",
      "output": "ğŸ” Validando implementaÃ§Ã£o do checklist de fusÃ£o...\n\n\n1ï¸âƒ£ Verificando unificaÃ§Ã£o de schemas...\nâœ… Schema unificado existe (shared/schema-unified.ts)\nâœ… ContÃ©m entidade Consultation (shared/schema-unified.ts)\nâœ… ContÃ©m entidade ExamOrder (shared/schema-unified.ts)\nâœ… ContÃ©m entidade Payment (shared/schema-unified.ts)\nâœ… Usa TeleMed como source of truth (shared/schema-unified.ts)\nâœ… Inclui relaÃ§Ãµes entre entidades (shared/schema-unified.ts)\n\n2ï¸âƒ£ Verificando consolidaÃ§Ã£o de autenticaÃ§Ã£o...\nâœ… AutenticaÃ§Ã£o unificada existe (server/auth-unified.ts)\nâœ… Implementa JWT (server/auth-unified.ts)\nâœ… Suporte a OAuth (server/auth-unified.ts)\nâœ… Role-based access control (server/auth-unified.ts)\nâœ… Refresh token support (server/auth-unified.ts)\n\n3ï¸âƒ£ Verificando padrÃµes de acessibilidade...\nâœ… Hooks de acessibilidade existem (client/src/hooks/useAccessibility.ts)\nâœ… Modal acessÃ­vel existe (client/src/components/AccessibleModal.tsx)\nâœ… Suporte a navegaÃ§Ã£o por teclado (client/src/hooks/useAccessibility.ts)\nâœ… Gerenciamento de foco (client/src/hooks/useAccessibility.ts)\nâœ… ARIA announcements (client/src/hooks/useAccessibility.ts)\nâœ… Modal usa roles ARIA (client/src/components/AccessibleModal.tsx)\nâœ… Modal suporta ESC (client/src/components/AccessibleModal.tsx)\nâœ… Modal tem aria-modal (client/src/components/AccessibleModal.tsx)\n\n4ï¸âƒ£ Verificando orÃ§amento de performance...\nâœ… ConfiguraÃ§Ã£o Lighthouse existe (lighthouserc.js)\nâœ… Script de verificaÃ§Ã£o existe (scripts/verify-performance.js)\nâœ… Budget performance â‰¥ 80 (lighthouserc.js)\nâœ… TBT â‰¤ 300ms (lighthouserc.js)\nâœ… Transfer â‰¤ 1.5MB (lighthouserc.js)\nâœ… Mobile emulation (lighthouserc.js)\n\n5ï¸âƒ£ Verificando pipeline CI...\nâœ… Pipeline CI existe (.github/workflows/ci.yml)\nâœ… Executa build (.github/workflows/ci.yml)\nâœ… Executa lint (.github/workflows/ci.yml)\nâœ… Verifica performance (.github/workflows/ci.yml)\nâœ… Setup Node.js 20 (.github/workflows/ci.yml)\n\nğŸ”— Verificando arquivos de integraÃ§Ã£o...\nâœ… Merge completo documentado (MERGE_COMPLETE.json)\nâœ… IntegraÃ§Ã£o completa documentada (INTEGRATION_COMPLETE.json)\nâœ… Checklist de fusÃ£o documentado (FUSION_CHECKLIST_COMPLETE.json)\nâœ… NavegaÃ§Ã£o unificada existe (client/src/components/UnifiedNavigation.tsx)\nâœ… PÃ¡gina home unificada existe (client/src/pages/UnifiedHome.tsx)\nâœ… Componentes Health Connect integrados (client/src/components/health-connect)\nâœ… 2 componentes UI integrados (client/src/components/health-connect)\n\nğŸ“Š Gerando relatÃ³rio de validaÃ§Ã£o...\n\nğŸ¯ RELATÃ“RIO DE VALIDAÃ‡ÃƒO DO CHECKLIST\n==================================================\nğŸ“Š Total de validaÃ§Ãµes: 37\nâœ… Passou: 37\nâŒ Falhou: 0\nğŸ“ˆ Taxa de sucesso: 100%\nğŸ† Status: COMPLIANT\n\nğŸ’¡ RecomendaÃ§Ãµes:\n   1. Sistema pronto para testes de aceitaÃ§Ã£o\n   2. Executar testes de performance em ambiente similar Ã  produÃ§Ã£o\n   3. Validar acessibilidade com ferramentas automÃ¡ticas\n   4. Documentar processo de migraÃ§Ã£o para equipe\n   5. Treinar usuÃ¡rios nas novas funcionalidades\n\nğŸ“„ RelatÃ³rio detalhado salvo em: FUSION_VALIDATION_REPORT.json",
      "description": "ValidaÃ§Ã£o completa do checklist de fusÃ£o TeleMed + Health Connect"
    }
  ],
  "recommendations": [
    "Corrigir testes que falharam antes de deploy",
    "Verificar se todas as rotas de API estÃ£o funcionando",
    "Corrigir problemas de acessibilidade identificados",
    "Otimizar performance para atingir budget definido",
    "Documentar resultados para equipe",
    "Estabelecer processo de testes contÃ­nuos"
  ]
}